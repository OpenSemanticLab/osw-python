
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://OpenSemanticLab.github.io/Tools/osw/">
      
      
        <link rel="prev" href="../auth/">
      
      
        <link rel="next" href="../model/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Osw - OpenSemanticWorld Python Package (osw)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#osw" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="OpenSemanticWorld Python Package (osw)" class="md-header__button md-logo" aria-label="OpenSemanticWorld Python Package (osw)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenSemanticWorld Python Package (osw)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Osw
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OpenSemanticWorld Python Package (osw)" class="md-nav__button md-logo" aria-label="OpenSemanticWorld Python Package (osw)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    OpenSemanticWorld Python Package (osw)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Auth
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Osw
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Osw
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW" class="md-nav__link">
    <span class="md-ellipsis">
      OSW
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.mw_site" class="md-nav__link">
    <span class="md-ellipsis">
      mw_site
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams" class="md-nav__link">
    <span class="md-ellipsis">
      ExportJsonLdParams
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExportJsonLdParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.additional_context" class="md-nav__link">
    <span class="md-ellipsis">
      additional_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.build_rdf_graph" class="md-nav__link">
    <span class="md-ellipsis">
      build_rdf_graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.context_loader_config" class="md-nav__link">
    <span class="md-ellipsis">
      context_loader_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.entities" class="md-nav__link">
    <span class="md-ellipsis">
      entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.frame" class="md-nav__link">
    <span class="md-ellipsis">
      frame
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.id_keys" class="md-nav__link">
    <span class="md-ellipsis">
      id_keys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.mode" class="md-nav__link">
    <span class="md-ellipsis">
      mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.resolve_context" class="md-nav__link">
    <span class="md-ellipsis">
      resolve_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdResult" class="md-nav__link">
    <span class="md-ellipsis">
      ExportJsonLdResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExportJsonLdResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdResult.documents" class="md-nav__link">
    <span class="md-ellipsis">
      documents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdResult.graph" class="md-nav__link">
    <span class="md-ellipsis">
      graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdResult.graph_document" class="md-nav__link">
    <span class="md-ellipsis">
      graph_document
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.FetchSchemaMode" class="md-nav__link">
    <span class="md-ellipsis">
      FetchSchemaMode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.FetchSchemaParam" class="md-nav__link">
    <span class="md-ellipsis">
      FetchSchemaParam
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FetchSchemaParam">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.FetchSchemaParam.legacy_generator" class="md-nav__link">
    <span class="md-ellipsis">
      legacy_generator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.JsonLdMode" class="md-nav__link">
    <span class="md-ellipsis">
      JsonLdMode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam" class="md-nav__link">
    <span class="md-ellipsis">
      LoadEntityParam
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LoadEntityParam">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam.autofetch_schema" class="md-nav__link">
    <span class="md-ellipsis">
      autofetch_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam.disable_cache" class="md-nav__link">
    <span class="md-ellipsis">
      disable_cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam.model_to_use" class="md-nav__link">
    <span class="md-ellipsis">
      model_to_use
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam.remove_empty" class="md-nav__link">
    <span class="md-ellipsis">
      remove_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam.titles" class="md-nav__link">
    <span class="md-ellipsis">
      titles
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityResult" class="md-nav__link">
    <span class="md-ellipsis">
      LoadEntityResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LoadEntityResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityResult.entities" class="md-nav__link">
    <span class="md-ellipsis">
      entities
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam" class="md-nav__link">
    <span class="md-ellipsis">
      OverwriteClassParam
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OverwriteClassParam">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.model" class="md-nav__link">
    <span class="md-ellipsis">
      model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.overwrite" class="md-nav__link">
    <span class="md-ellipsis">
      overwrite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.per_property" class="md-nav__link">
    <span class="md-ellipsis">
      per_property
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.__setattr__" class="md-nav__link">
    <span class="md-ellipsis">
      __setattr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.get_overwrite_setting" class="md-nav__link">
    <span class="md-ellipsis">
      get_overwrite_setting
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaRegistration" class="md-nav__link">
    <span class="md-ellipsis">
      SchemaRegistration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SchemaRegistration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaRegistration.model_cls" class="md-nav__link">
    <span class="md-ellipsis">
      model_cls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaRegistration.schema_bases" class="md-nav__link">
    <span class="md-ellipsis">
      schema_bases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaRegistration.schema_name" class="md-nav__link">
    <span class="md-ellipsis">
      schema_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaRegistration.schema_uuid" class="md-nav__link">
    <span class="md-ellipsis">
      schema_uuid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaUnregistration" class="md-nav__link">
    <span class="md-ellipsis">
      SchemaUnregistration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SchemaUnregistration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaUnregistration.comment" class="md-nav__link">
    <span class="md-ellipsis">
      comment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaUnregistration.model_cls" class="md-nav__link">
    <span class="md-ellipsis">
      model_cls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaUnregistration.model_uuid" class="md-nav__link">
    <span class="md-ellipsis">
      model_uuid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam" class="md-nav__link">
    <span class="md-ellipsis">
      StoreEntityParam
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StoreEntityParam">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.bot_edit" class="md-nav__link">
    <span class="md-ellipsis">
      bot_edit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.change_id" class="md-nav__link">
    <span class="md-ellipsis">
      change_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.edit_comment" class="md-nav__link">
    <span class="md-ellipsis">
      edit_comment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.entities" class="md-nav__link">
    <span class="md-ellipsis">
      entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.namespace" class="md-nav__link">
    <span class="md-ellipsis">
      namespace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.offline" class="md-nav__link">
    <span class="md-ellipsis">
      offline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.overwrite" class="md-nav__link">
    <span class="md-ellipsis">
      overwrite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.overwrite_per_class" class="md-nav__link">
    <span class="md-ellipsis">
      overwrite_per_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.parallel" class="md-nav__link">
    <span class="md-ellipsis">
      parallel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.remove_empty" class="md-nav__link">
    <span class="md-ellipsis">
      remove_empty
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityResult" class="md-nav__link">
    <span class="md-ellipsis">
      StoreEntityResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StoreEntityResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityResult.change_id" class="md-nav__link">
    <span class="md-ellipsis">
      change_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityResult.pages" class="md-nav__link">
    <span class="md-ellipsis">
      pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.check_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      check_dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.close_connection" class="md-nav__link">
    <span class="md-ellipsis">
      close_connection
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.delete_entity" class="md-nav__link">
    <span class="md-ellipsis">
      delete_entity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.ensure_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      ensure_dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.export_jsonld" class="md-nav__link">
    <span class="md-ellipsis">
      export_jsonld
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.fetch_schema" class="md-nav__link">
    <span class="md-ellipsis">
      fetch_schema
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.get_osw_id" class="md-nav__link">
    <span class="md-ellipsis">
      get_osw_id
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.get_uuid" class="md-nav__link">
    <span class="md-ellipsis">
      get_uuid
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.install_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      install_dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.load_entity" class="md-nav__link">
    <span class="md-ellipsis">
      load_entity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.register_schema" class="md-nav__link">
    <span class="md-ellipsis">
      register_schema
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.sort_list_of_entities_by_class" class="md-nav__link">
    <span class="md-ellipsis">
      sort_list_of_entities_by_class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.store_entity" class="md-nav__link">
    <span class="md-ellipsis">
      store_entity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.unregister_schema" class="md-nav__link">
    <span class="md-ellipsis">
      unregister_schema
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenSematicLab Controller
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW" class="md-nav__link">
    <span class="md-ellipsis">
      OSW
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.mw_site" class="md-nav__link">
    <span class="md-ellipsis">
      mw_site
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams" class="md-nav__link">
    <span class="md-ellipsis">
      ExportJsonLdParams
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExportJsonLdParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.additional_context" class="md-nav__link">
    <span class="md-ellipsis">
      additional_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.build_rdf_graph" class="md-nav__link">
    <span class="md-ellipsis">
      build_rdf_graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.context_loader_config" class="md-nav__link">
    <span class="md-ellipsis">
      context_loader_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.entities" class="md-nav__link">
    <span class="md-ellipsis">
      entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.frame" class="md-nav__link">
    <span class="md-ellipsis">
      frame
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.id_keys" class="md-nav__link">
    <span class="md-ellipsis">
      id_keys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.mode" class="md-nav__link">
    <span class="md-ellipsis">
      mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdParams.resolve_context" class="md-nav__link">
    <span class="md-ellipsis">
      resolve_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdResult" class="md-nav__link">
    <span class="md-ellipsis">
      ExportJsonLdResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExportJsonLdResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdResult.documents" class="md-nav__link">
    <span class="md-ellipsis">
      documents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdResult.graph" class="md-nav__link">
    <span class="md-ellipsis">
      graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.ExportJsonLdResult.graph_document" class="md-nav__link">
    <span class="md-ellipsis">
      graph_document
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.FetchSchemaMode" class="md-nav__link">
    <span class="md-ellipsis">
      FetchSchemaMode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.FetchSchemaParam" class="md-nav__link">
    <span class="md-ellipsis">
      FetchSchemaParam
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FetchSchemaParam">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.FetchSchemaParam.legacy_generator" class="md-nav__link">
    <span class="md-ellipsis">
      legacy_generator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.JsonLdMode" class="md-nav__link">
    <span class="md-ellipsis">
      JsonLdMode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam" class="md-nav__link">
    <span class="md-ellipsis">
      LoadEntityParam
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LoadEntityParam">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam.autofetch_schema" class="md-nav__link">
    <span class="md-ellipsis">
      autofetch_schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam.disable_cache" class="md-nav__link">
    <span class="md-ellipsis">
      disable_cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam.model_to_use" class="md-nav__link">
    <span class="md-ellipsis">
      model_to_use
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam.remove_empty" class="md-nav__link">
    <span class="md-ellipsis">
      remove_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityParam.titles" class="md-nav__link">
    <span class="md-ellipsis">
      titles
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityResult" class="md-nav__link">
    <span class="md-ellipsis">
      LoadEntityResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LoadEntityResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.LoadEntityResult.entities" class="md-nav__link">
    <span class="md-ellipsis">
      entities
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam" class="md-nav__link">
    <span class="md-ellipsis">
      OverwriteClassParam
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OverwriteClassParam">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.model" class="md-nav__link">
    <span class="md-ellipsis">
      model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.overwrite" class="md-nav__link">
    <span class="md-ellipsis">
      overwrite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.per_property" class="md-nav__link">
    <span class="md-ellipsis">
      per_property
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.__setattr__" class="md-nav__link">
    <span class="md-ellipsis">
      __setattr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.OverwriteClassParam.get_overwrite_setting" class="md-nav__link">
    <span class="md-ellipsis">
      get_overwrite_setting
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaRegistration" class="md-nav__link">
    <span class="md-ellipsis">
      SchemaRegistration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SchemaRegistration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaRegistration.model_cls" class="md-nav__link">
    <span class="md-ellipsis">
      model_cls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaRegistration.schema_bases" class="md-nav__link">
    <span class="md-ellipsis">
      schema_bases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaRegistration.schema_name" class="md-nav__link">
    <span class="md-ellipsis">
      schema_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaRegistration.schema_uuid" class="md-nav__link">
    <span class="md-ellipsis">
      schema_uuid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaUnregistration" class="md-nav__link">
    <span class="md-ellipsis">
      SchemaUnregistration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SchemaUnregistration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaUnregistration.comment" class="md-nav__link">
    <span class="md-ellipsis">
      comment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaUnregistration.model_cls" class="md-nav__link">
    <span class="md-ellipsis">
      model_cls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.SchemaUnregistration.model_uuid" class="md-nav__link">
    <span class="md-ellipsis">
      model_uuid
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam" class="md-nav__link">
    <span class="md-ellipsis">
      StoreEntityParam
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StoreEntityParam">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.bot_edit" class="md-nav__link">
    <span class="md-ellipsis">
      bot_edit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.change_id" class="md-nav__link">
    <span class="md-ellipsis">
      change_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.edit_comment" class="md-nav__link">
    <span class="md-ellipsis">
      edit_comment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.entities" class="md-nav__link">
    <span class="md-ellipsis">
      entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.namespace" class="md-nav__link">
    <span class="md-ellipsis">
      namespace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.offline" class="md-nav__link">
    <span class="md-ellipsis">
      offline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.overwrite" class="md-nav__link">
    <span class="md-ellipsis">
      overwrite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.overwrite_per_class" class="md-nav__link">
    <span class="md-ellipsis">
      overwrite_per_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.parallel" class="md-nav__link">
    <span class="md-ellipsis">
      parallel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityParam.remove_empty" class="md-nav__link">
    <span class="md-ellipsis">
      remove_empty
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityResult" class="md-nav__link">
    <span class="md-ellipsis">
      StoreEntityResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StoreEntityResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityResult.change_id" class="md-nav__link">
    <span class="md-ellipsis">
      change_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#osw.core.OSW.StoreEntityResult.pages" class="md-nav__link">
    <span class="md-ellipsis">
      pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.check_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      check_dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.close_connection" class="md-nav__link">
    <span class="md-ellipsis">
      close_connection
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.delete_entity" class="md-nav__link">
    <span class="md-ellipsis">
      delete_entity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.ensure_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      ensure_dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.export_jsonld" class="md-nav__link">
    <span class="md-ellipsis">
      export_jsonld
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.fetch_schema" class="md-nav__link">
    <span class="md-ellipsis">
      fetch_schema
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.get_osw_id" class="md-nav__link">
    <span class="md-ellipsis">
      get_osw_id
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.get_uuid" class="md-nav__link">
    <span class="md-ellipsis">
      get_uuid
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.install_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      install_dependencies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.load_entity" class="md-nav__link">
    <span class="md-ellipsis">
      load_entity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.register_schema" class="md-nav__link">
    <span class="md-ellipsis">
      register_schema
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.sort_list_of_entities_by_class" class="md-nav__link">
    <span class="md-ellipsis">
      sort_list_of_entities_by_class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.store_entity" class="md-nav__link">
    <span class="md-ellipsis">
      store_entity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#osw.core.OSW.unregister_schema" class="md-nav__link">
    <span class="md-ellipsis">
      unregister_schema
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<p>OpenSematicWorld Class</p>
<h1 id="osw">OSW</h1>


<div class="doc doc-object doc-class">



<a id="osw.core.OSW"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.v1.BaseModel">BaseModel</span></code></p>


        <p>Bundles core functionalities of OpenSemanticWorld (OSW)</p>







              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  88</span>
<span class="normal">  89</span>
<span class="normal">  90</span>
<span class="normal">  91</span>
<span class="normal">  92</span>
<span class="normal">  93</span>
<span class="normal">  94</span>
<span class="normal">  95</span>
<span class="normal">  96</span>
<span class="normal">  97</span>
<span class="normal">  98</span>
<span class="normal">  99</span>
<span class="normal"> 100</span>
<span class="normal"> 101</span>
<span class="normal"> 102</span>
<span class="normal"> 103</span>
<span class="normal"> 104</span>
<span class="normal"> 105</span>
<span class="normal"> 106</span>
<span class="normal"> 107</span>
<span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span>
<span class="normal">1594</span>
<span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span>
<span class="normal">1605</span>
<span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">OSW</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Bundles core functionalities of OpenSemanticWorld (OSW)&quot;&quot;&quot;</span>

    <span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;2ea5b605-c91f-4e5a-9559-3dff79fdd4a5&quot;</span>
    <span class="n">_protected_keywords</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;_osl_template&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_osl_footer&quot;</span><span class="p">,</span>
    <span class="p">)</span>  <span class="c1"># private properties included in model export</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># necessary to allow e.g. np.array as type</span>

    <span class="n">site</span><span class="p">:</span> <span class="n">WtSite</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">mw_site</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Site</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the mwclient Site object of the OSW instance.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">mw_site</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">close_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Close the connection to the OSL instance.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mw_site</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_osw_id</span><span class="p">(</span><span class="n">uuid</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates a OSW-ID based on the given uuid by prefixing &quot;OSW&quot; and removing</span>
<span class="sd">        all &#39;-&#39; from the uuid-string</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        uuid</span>
<span class="sd">            uuid object, e.g. UUID(&quot;2ea5b605-c91f-4e5a-9559-3dff79fdd4a5&quot;)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            OSW-ID string, e.g. OSW2ea5b605c91f4e5a95593dff79fdd4a5</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;OSW&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_uuid</span><span class="p">(</span><span class="n">osw_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UUID</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the uuid for a given OSW-ID</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        osw_id</span>
<span class="sd">            OSW-ID string, e.g. OSW2ea5b605c91f4e5a95593dff79fdd4a5</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            uuid object, e.g. UUID(&quot;2ea5b605-c91f-4e5a-9559-3dff79fdd4a5&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UUID</span><span class="p">(</span><span class="n">osw_id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;OSW&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">SortEntitiesResult</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
        <span class="n">by_name</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>
        <span class="n">by_type</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sort_list_of_entities_by_class</span><span class="p">(</span>
        <span class="n">entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">],</span>
        <span class="n">exclude_typeless</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">raise_error</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SortEntitiesResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sorts a list of entities by class name and type.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        entities:</span>
<span class="sd">            List of entities to be sorted</span>
<span class="sd">        exclude_typeless:</span>
<span class="sd">            Exclude entities, which are instances of a class that does not</span>
<span class="sd">            define a field &#39;type&#39;</span>
<span class="sd">        raise_error:</span>
<span class="sd">            Raise an error if an entity can not be processed because it is an</span>
<span class="sd">            instance of class that does not define a field &#39;type&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">by_name</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">by_type</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
            <span class="c1"># Get class name</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="c1"># See if the class has a type field</span>
            <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Instance &#39;</span><span class="si">{</span><span class="n">entity</span><span class="si">}</span><span class="s2">&#39; of class &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; can not be processed &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;as the class does not define a field &#39;type&#39;.&quot;</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">exclude_typeless</span><span class="p">:</span>
                    <span class="n">warn</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Skipping instance &#39;</span><span class="si">{</span><span class="n">entity</span><span class="si">}</span><span class="s2">&#39; of class &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; as the class &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;does not define a field &#39;type&#39;.&quot;</span>
                    <span class="p">)</span>
                    <span class="c1"># Excludes the respective entity from the list which will be</span>
                    <span class="c1">#  processed further:</span>
                    <span class="k">continue</span>
                <span class="n">model_type</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Get class type if available</span>
                <span class="n">model_type</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_default</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="c1"># Add entity to by_name</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">by_name</span><span class="p">:</span>
                <span class="n">by_name</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">by_name</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
            <span class="c1"># Add entity to by_type</span>
            <span class="k">if</span> <span class="n">model_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">by_type</span><span class="p">:</span>
                <span class="n">by_type</span><span class="p">[</span><span class="n">model_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">by_type</span><span class="p">[</span><span class="n">model_type</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">OSW</span><span class="o">.</span><span class="n">SortEntitiesResult</span><span class="p">(</span><span class="n">by_name</span><span class="o">=</span><span class="n">by_name</span><span class="p">,</span> <span class="n">by_type</span><span class="o">=</span><span class="n">by_type</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">SchemaRegistration</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;dataclass param of register_schema()&quot;&quot;&quot;</span>

        <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
            <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># allow any class as type</span>

        <span class="n">model_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The model class&quot;&quot;&quot;</span>
        <span class="n">schema_uuid</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># Optional[str] = model_cls.__uuid__</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The schema uuid&quot;&quot;&quot;</span>
        <span class="n">schema_name</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># Optional[str] = model_cls.__name__</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The schema name&quot;&quot;&quot;</span>
        <span class="n">schema_bases</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Category:Item&quot;</span><span class="p">])</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of base schemas (referenced by allOf)&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema_registration</span><span class="p">:</span> <span class="n">SchemaRegistration</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Registers a new or updated schema in OSW by creating the corresponding</span>
<span class="sd">        category page.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        schema_registration</span>
<span class="sd">            see SchemaRegistration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="n">schema_registration</span><span class="o">.</span><span class="n">model_cls</span>

        <span class="n">jsondata</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">jsondata</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">schema_registration</span><span class="o">.</span><span class="n">schema_uuid</span>
        <span class="n">jsondata</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">schema_registration</span><span class="o">.</span><span class="n">schema_name</span><span class="p">,</span> <span class="s2">&quot;lang&quot;</span><span class="p">:</span> <span class="s2">&quot;en&quot;</span><span class="p">}</span>
        <span class="n">jsondata</span><span class="p">[</span><span class="s2">&quot;subclass_of&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">schema_registration</span><span class="o">.</span><span class="n">schema_bases</span>

        <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">entity_title</span> <span class="o">=</span> <span class="s2">&quot;Category:&quot;</span> <span class="o">+</span> <span class="n">OSW</span><span class="o">.</span><span class="n">get_osw_id</span><span class="p">(</span><span class="n">schema_registration</span><span class="o">.</span><span class="n">schema_uuid</span><span class="p">)</span>

            <span class="n">page</span> <span class="o">=</span> <span class="n">WtPage</span><span class="p">(</span><span class="n">wtSite</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">entity_title</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
                <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span>
                    <span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">entity_title</span><span class="p">])</span>
                <span class="p">)</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">page</span><span class="o">.</span><span class="n">set_slot_content</span><span class="p">(</span><span class="s2">&quot;jsondata&quot;</span><span class="p">,</span> <span class="n">jsondata</span><span class="p">)</span>

            <span class="n">schema</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$ref&quot;</span><span class="p">,</span> <span class="s2">&quot;dollarref&quot;</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="n">jsonpath_expr</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s2">&quot;$..allOf&quot;</span><span class="p">)</span>
            <span class="c1"># Replace local definitions (#/definitions/...) with embedded definitions</span>
            <span class="c1">#  to prevent resolve errors in json-editor</span>
            <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">jsonpath_expr</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">schema</span><span class="p">):</span>
                <span class="n">result_array</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">subschema</span> <span class="ow">in</span> <span class="n">match</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                    <span class="c1"># pprint(subschema)</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">subschema</span><span class="p">[</span><span class="s2">&quot;dollarref&quot;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
                        <span class="n">definition_jsonpath_expr</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span>
                            <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="k">for</span> <span class="n">def_match</span> <span class="ow">in</span> <span class="n">definition_jsonpath_expr</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">schema</span><span class="p">):</span>
                            <span class="c1"># pprint(def_match.value)</span>
                            <span class="n">result_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">def_match</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">result_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subschema</span><span class="p">)</span>
                <span class="k">match</span><span class="o">.</span><span class="n">full_path</span><span class="o">.</span><span class="n">update_or_create</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">result_array</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;definitions&quot;</span> <span class="ow">in</span> <span class="n">schema</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">schema</span><span class="p">[</span><span class="s2">&quot;definitions&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot;allOf&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">schema</span><span class="p">:</span>
                <span class="n">schema</span><span class="p">[</span><span class="s2">&quot;allOf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="n">schema_registration</span><span class="o">.</span><span class="n">schema_bases</span><span class="p">:</span>
                <span class="n">schema</span><span class="p">[</span><span class="s2">&quot;allOf&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span><span class="s2">&quot;$ref&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;/wiki/</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">?action=raw&amp;slot=jsonschema&quot;</span><span class="p">}</span>
                <span class="p">)</span>

            <span class="n">page</span><span class="o">.</span><span class="n">set_slot_content</span><span class="p">(</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Unsupported entity type&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">page</span><span class="o">.</span><span class="n">edit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entity stored at &quot;</span> <span class="o">+</span> <span class="n">page</span><span class="o">.</span><span class="n">get_url</span><span class="p">())</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">SchemaUnregistration</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;dataclass param of register_schema()&quot;&quot;&quot;</span>

        <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
            <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># allow any class as type</span>

        <span class="n">model_cls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The model class&quot;&quot;&quot;</span>
        <span class="n">model_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The model uuid&quot;&quot;&quot;</span>
        <span class="n">comment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The comment for the deletion, to be left behind&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">unregister_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema_unregistration</span><span class="p">:</span> <span class="n">SchemaUnregistration</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;deletes the corresponding category page</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        schema_unregistration</span>
<span class="sd">            see SchemaUnregistration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uuid</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">schema_unregistration</span><span class="o">.</span><span class="n">model_uuid</span><span class="p">:</span>
            <span class="n">uuid</span> <span class="o">=</span> <span class="n">schema_unregistration</span><span class="o">.</span><span class="n">model_uuid</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="n">uuid</span>
            <span class="ow">and</span> <span class="n">schema_unregistration</span><span class="o">.</span><span class="n">model_cls</span>
            <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">schema_unregistration</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">uuid</span> <span class="o">=</span> <span class="n">schema_unregistration</span><span class="o">.</span><span class="n">model_cls</span><span class="o">.</span><span class="n">__uuid__</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Neither model nor model id provided&quot;</span><span class="p">)</span>

        <span class="n">entity_title</span> <span class="o">=</span> <span class="s2">&quot;Category:&quot;</span> <span class="o">+</span> <span class="n">OSW</span><span class="o">.</span><span class="n">get_osw_id</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span>
        <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">entity_title</span><span class="p">]))</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">page</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">schema_unregistration</span><span class="o">.</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">FetchSchemaMode</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Modes of the FetchSchemaParam class</span>

<span class="sd">        Attributes</span>
<span class="sd">        ----------</span>
<span class="sd">        append:</span>
<span class="sd">            append to the current model</span>
<span class="sd">        replace:</span>
<span class="sd">            replace the current model</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">append</span> <span class="o">=</span> <span class="s2">&quot;append&quot;</span>  <span class="c1"># append to the current model</span>
        <span class="n">replace</span> <span class="o">=</span> <span class="s2">&quot;replace&quot;</span>  <span class="c1"># replace the current model</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">FetchSchemaParam</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Param for fetch_schema()</span>

<span class="sd">        Attributes</span>
<span class="sd">        ----------</span>
<span class="sd">        schema_title:</span>
<span class="sd">            one or multiple titles (wiki page name) of schemas (default: Category:Item)</span>
<span class="sd">        mode:</span>
<span class="sd">            append or replace (default) current schema, see FetchSchemaMode</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">schema_title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;Category:Item&quot;</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;replace&quot;</span>
            <span class="c1"># type &#39;FetchSchemaMode&#39; requires: &#39;from __future__ import annotations&#39;</span>
        <span class="p">)</span>
        <span class="n">legacy_generator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;uses legacy command line for code generation if true&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fetch_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fetchSchemaParam</span><span class="p">:</span> <span class="n">FetchSchemaParam</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads the given schemas from the OSW instance and auto-generates python</span>
<span class="sd">        datasclasses within osw.model.entity from it</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fetchSchemaParam</span>
<span class="sd">            See FetchSchemaParam, by default None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">schema_title</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">schema_title</span> <span class="o">=</span> <span class="p">[</span><span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">schema_title</span><span class="p">]</span>
        <span class="n">first</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">schema_title</span> <span class="ow">in</span> <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">schema_title</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">mode</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">first</span><span class="p">:</span>  <span class="c1"># &#39;replace&#39; makes only sense for the first schema</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;append&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_schema</span><span class="p">(</span>
                <span class="n">OSW</span><span class="o">.</span><span class="n">_FetchSchemaParam</span><span class="p">(</span>
                    <span class="n">schema_title</span><span class="o">=</span><span class="n">schema_title</span><span class="p">,</span>
                    <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
                    <span class="n">legacy_generator</span><span class="o">=</span><span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">legacy_generator</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">_FetchSchemaParam</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal param for _fetch_schema()</span>

<span class="sd">        Attributes</span>
<span class="sd">        ----------</span>
<span class="sd">        schema_title:</span>
<span class="sd">            the title (wiki page name) of the schema (default: Category:Item)</span>
<span class="sd">        root:</span>
<span class="sd">            marks the root iteration for a recursive fetch (internal param,</span>
<span class="sd">            default: True)</span>
<span class="sd">        mode:</span>
<span class="sd">            append or replace (default) current schema, see FetchSchemaMode</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">schema_title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Category:Item&quot;</span>
        <span class="n">root</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;replace&quot;</span>
            <span class="c1"># type &#39;FetchSchemaMode&#39; requires: &#39;from __future__ import annotations&#39;</span>
        <span class="p">)</span>
        <span class="n">legacy_generator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;uses legacy command line for code generation if true&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_fetch_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fetchSchemaParam</span><span class="p">:</span> <span class="n">_FetchSchemaParam</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads the given schema from the OSW instance and autogenerates python</span>
<span class="sd">        datasclasses within osw.model.entity from it</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fetchSchemaParam</span>
<span class="sd">            See FetchSchemaParam, by default None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">site_cache_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_cache_enabled</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">enable_cache</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">fetchSchemaParam</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fetchSchemaParam</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">_FetchSchemaParam</span><span class="p">()</span>
        <span class="n">schema_title</span> <span class="o">=</span> <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">schema_title</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">root</span>
        <span class="n">schema_name</span> <span class="o">=</span> <span class="n">schema_title</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">schema_title</span><span class="p">]))</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">page</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: Page </span><span class="si">{</span><span class="n">schema_title</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="c1"># not only in the JsonSchema namespace the schema is located in the main sot</span>
        <span class="c1"># in all other namespaces, the json_schema slot is used</span>
        <span class="k">if</span> <span class="n">schema_title</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;JsonSchema:&quot;</span><span class="p">):</span>
            <span class="n">schema_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;main&quot;</span><span class="p">):</span>
                <span class="n">schema_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;main&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">schema_str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">):</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="n">merge_generated_definitions</span><span class="p">(</span>
                    <span class="n">deepcopy</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">))</span>
                <span class="p">)</span>
                <span class="n">schema_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">schema_str</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">schema_str</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: Schema </span><span class="si">{</span><span class="n">schema_title</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
            <span class="n">schema_str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span>  <span class="c1"># empty schema to make reference work</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
            <span class="n">schema_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$ref&quot;</span><span class="p">,</span> <span class="s2">&quot;dollarref&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="c1"># &#39;$&#39; is a special char for root object in jsonpath</span>
                <span class="s1">&#39;&quot;allOf&quot;: [&#39;</span><span class="p">,</span>
                <span class="s1">&#39;&quot;allOf&quot;: [</span><span class="si">{}</span><span class="s1">,&#39;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># fix https://github.com/koxudaxi/datamodel-code-generator/issues/1910</span>
        <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetch </span><span class="si">{</span><span class="n">schema_title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">jsonpath_expr</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s2">&quot;$..dollarref&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">jsonpath_expr</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">schema</span><span class="p">):</span>
            <span class="c1"># value = &quot;https://&quot; + self.mw_site.host + match.value</span>
            <span class="k">if</span> <span class="n">match</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
                <span class="k">continue</span>  <span class="c1"># skip self references</span>
            <span class="n">ref_schema_title</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/wiki/&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;?&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">ref_schema_name</span> <span class="o">=</span> <span class="n">ref_schema_title</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">schema_name</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)):</span>
                <span class="n">value</span> <span class="o">+=</span> <span class="s2">&quot;../&quot;</span>  <span class="c1"># created relative path to top-level schema dir</span>
            <span class="n">value</span> <span class="o">+=</span> <span class="n">ref_schema_name</span>  <span class="c1"># create a reference to a local file</span>
            <span class="c1"># keep document-relative jsonpointer if present</span>
            <span class="k">if</span> <span class="s2">&quot;#/&quot;</span> <span class="ow">in</span> <span class="n">match</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">+=</span> <span class="s2">&quot;#/&quot;</span> <span class="o">+</span> <span class="n">match</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;#/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">match</span><span class="o">.</span><span class="n">full_path</span><span class="o">.</span><span class="n">update_or_create</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="c1"># print(f&quot;replace {match.value} with {value}&quot;)</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">ref_schema_title</span> <span class="o">!=</span> <span class="n">schema_title</span>
            <span class="p">):</span>  <span class="c1"># prevent recursion in case of self references</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_schema</span><span class="p">(</span>
                    <span class="n">OSW</span><span class="o">.</span><span class="n">_FetchSchemaParam</span><span class="p">(</span><span class="n">schema_title</span><span class="o">=</span><span class="n">ref_schema_title</span><span class="p">,</span> <span class="n">root</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="p">)</span>  <span class="c1"># resolve references recursive</span>

        <span class="n">model_dir_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span> <span class="s2">&quot;model&quot;</span>
        <span class="p">)</span>  <span class="c1"># src/model</span>
        <span class="n">schema_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">model_dir_path</span><span class="p">,</span> <span class="n">schema_name</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">schema_path</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">schema_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">schema_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot;dollarref&quot;</span><span class="p">,</span> <span class="s2">&quot;$ref&quot;</span>
            <span class="p">)</span>
            <span class="c1"># print(schema_str)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">schema_str</span><span class="p">)</span>

        <span class="c1"># result_model_path = schema_path.replace(&quot;.json&quot;, &quot;.py&quot;)</span>
        <span class="n">result_model_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">model_dir_path</span><span class="p">,</span> <span class="s2">&quot;entity.py&quot;</span><span class="p">)</span>
        <span class="n">temp_model_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">model_dir_path</span><span class="p">,</span> <span class="s2">&quot;temp.py&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">root</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">legacy_generator</span><span class="p">:</span>
                <span class="n">exec_name</span> <span class="o">=</span> <span class="s2">&quot;datamodel-codegen&quot;</span>
                <span class="c1"># default: assume datamodel-codegen is in PATH</span>
                <span class="n">exec_path</span> <span class="o">=</span> <span class="n">exec_name</span>
                <span class="k">if</span> <span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>
                    <span class="n">exec_name</span> <span class="o">+=</span> <span class="s2">&quot;.exe&quot;</span>
                    <span class="n">exec_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">)),</span> <span class="n">exec_name</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">exec_path</span><span class="p">):</span>
                        <span class="n">exec_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">)),</span>
                            <span class="s2">&quot;Scripts&quot;</span><span class="p">,</span>
                            <span class="n">exec_name</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">exec_path</span><span class="p">):</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: datamodel-codegen not found&quot;</span><span class="p">)</span>
                        <span class="k">return</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">exec_path</span><span class="si">}</span><span class="s2">  </span><span class="se">\</span>
<span class="s2">                    --input </span><span class="si">{</span><span class="n">schema_path</span><span class="si">}</span><span class="s2"> </span><span class="se">\</span>
<span class="s2">                    --input-file-type jsonschema </span><span class="se">\</span>
<span class="s2">                    --output </span><span class="si">{</span><span class="n">temp_model_path</span><span class="si">}</span><span class="s2"> </span><span class="se">\</span>
<span class="s2">                    --base-class osw.model.static.OswBaseModel </span><span class="se">\</span>
<span class="s2">                    --use-default </span><span class="se">\</span>
<span class="s2">                    --use-unique-items-as-set </span><span class="se">\</span>
<span class="s2">                    --enum-field-as-literal all </span><span class="se">\</span>
<span class="s2">                    --use-title-as-name </span><span class="se">\</span>
<span class="s2">                    --use-schema-description </span><span class="se">\</span>
<span class="s2">                    --use-field-description </span><span class="se">\</span>
<span class="s2">                    --encoding utf-8 </span><span class="se">\</span>
<span class="s2">                    --use-double-quotes </span><span class="se">\</span>
<span class="s2">                    --collapse-root-models </span><span class="se">\</span>
<span class="s2">                    --reuse-model </span><span class="se">\</span>
<span class="s2">                &quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># suppress deprecation warnings from pydantic</span>
                <span class="c1"># see https://github.com/koxudaxi/datamodel-code-generator/issues/2213</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="n">PydanticDeprecatedSince20</span><span class="p">)</span>
                <span class="n">datamodel_code_generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
                    <span class="n">input_</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">schema_path</span><span class="p">),</span>
                    <span class="n">input_file_type</span><span class="o">=</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">,</span>
                    <span class="n">output</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">temp_model_path</span><span class="p">),</span>
                    <span class="n">base_class</span><span class="o">=</span><span class="s2">&quot;osw.model.static.OswBaseModel&quot;</span><span class="p">,</span>
                    <span class="c1"># use_default=True,</span>
                    <span class="n">apply_default_values_for_required_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">use_unique_items_as_set</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">enum_field_as_literal</span><span class="o">=</span><span class="n">datamodel_code_generator</span><span class="o">.</span><span class="n">LiteralType</span><span class="o">.</span><span class="n">All</span><span class="p">,</span>
                    <span class="n">use_title_as_name</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">use_schema_description</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">use_field_description</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
                    <span class="n">use_double_quotes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">collapse_root_models</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">reuse_model</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="n">PydanticDeprecatedSince20</span><span class="p">)</span>

            <span class="c1"># see https://koxudaxi.github.io/datamodel-code-generator/</span>
            <span class="c1"># --base-class OswBaseModel: use a custom base class</span>
            <span class="c1"># --custom-template-dir src/model/template_data/</span>
            <span class="c1"># --extra-template-data src/model/template_data/extra.json</span>
            <span class="c1"># --use-default: Use default value even if a field is required</span>
            <span class="c1"># --use-unique-items-as-set: define field type as `set` when the field</span>
            <span class="c1">#  attribute has`uniqueItems`</span>
            <span class="c1"># --enum-field-as-literal all: prevent &#39;value is not a valid enumeration</span>
            <span class="c1">#  member&#39; errors after schema reloading</span>
            <span class="c1"># --use-schema-description: Use schema description to populate class</span>
            <span class="c1">#  docstring</span>
            <span class="c1"># --use-field-description: Use schema description to populate field</span>
            <span class="c1">#  docstring</span>
            <span class="c1"># --use-title-as-name: use titles as class names of models, e.g. for the</span>
            <span class="c1">#  footer templates</span>
            <span class="c1"># --collapse-root-models: Models generated with a root-type field will be</span>
            <span class="c1">#  merged</span>
            <span class="c1"># into the models using that root-type model, e.g. for Entity.statements</span>
            <span class="c1"># --reuse-model: Re-use models on the field when a module has the model</span>
            <span class="c1">#  with the same content</span>

            <span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp_model_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">temp_model_path</span><span class="p">)</span>

            <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                <span class="sa">r</span><span class="s2">&quot;(UUID = Field\(...)&quot;</span><span class="p">,</span>
                <span class="sa">r</span><span class="s2">&quot;UUID = Field(default_factory=uuid4&quot;</span><span class="p">,</span>
                <span class="n">content</span><span class="p">,</span>
            <span class="p">)</span>  <span class="c1"># enable default value for uuid</span>

            <span class="c1"># we are now using pydantic.v1</span>
            <span class="c1"># pydantic imports lead to uninitialized fields (FieldInfo still present)</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                <span class="sa">r</span><span class="s2">&quot;(from pydantic import)&quot;</span><span class="p">,</span> <span class="s2">&quot;from pydantic.v1 import&quot;</span><span class="p">,</span> <span class="n">content</span>
            <span class="p">)</span>

            <span class="c1"># remove field param unique_items</span>
            <span class="c1"># --use-unique-items-as-set still keeps unique_items=True as Field param</span>
            <span class="c1"># which was removed, see https://github.com/pydantic/pydantic-core/issues/296</span>
            <span class="c1"># --output-model-type pydantic_v2.BaseModel fixes that but generated models</span>
            <span class="c1"># are not v1 compatible mainly by using update_model()</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(,?\s*unique_items=True\s*)&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;replace&quot;</span><span class="p">:</span>
                <span class="n">header</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;from uuid import uuid4</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;from typing import Type, TypeVar</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;from osw.model.static import OswBaseModel, Ontology</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="c1"># &quot;from osw.model.static import *\n&quot;</span>
                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="p">)</span>

                <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                    <span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;(class\s*\S*\s*\(\s*OswBaseModel\s*\)\s*:.*\n)&quot;</span><span class="p">,</span>
                    <span class="n">repl</span><span class="o">=</span><span class="n">header</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\n\n\n\1&quot;</span><span class="p">,</span>
                    <span class="n">string</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
                    <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="p">)</span>  <span class="c1"># add header before first class declaration</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">result_model_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;append&quot;</span><span class="p">:</span>
                <span class="n">org_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">result_model_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">org_content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

                <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
                    <span class="sa">r</span><span class="s2">&quot;class\s*([\S]*)\s*\(\s*[\S\s]*?\s*\)\s*:.*\n&quot;</span>
                <span class="p">)</span>  <span class="c1"># match class definition [\s\S]*(?:[^\S\n]*\n){2,}</span>
                <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">org_content</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
                    <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                        <span class="sa">r</span><span class="s2">&quot;(class\s*&quot;</span>
                        <span class="o">+</span> <span class="bp">cls</span>
                        <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\s*\(\s*[\S\s]*?\s*\)\s*:.*\n[\s\S]*?(?:[^\S\n]*\n){3,})&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;&quot;</span><span class="p">,</span>
                        <span class="n">content</span><span class="p">,</span>
                        <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="p">)</span>  <span class="c1"># replace duplicated classes</span>

                <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                    <span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;(from __future__ import annotations)&quot;</span><span class="p">,</span>
                    <span class="n">repl</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                    <span class="n">string</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
                    <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="p">)</span>  <span class="c1"># remove import statement</span>
                <span class="c1"># print(content)</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">result_model_path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

            <span class="n">importlib</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>  <span class="c1"># reload the updated module</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">site_cache_state</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">disable_cache</span><span class="p">()</span>  <span class="c1"># restore original state</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">install_dependencies</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dependencies</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;append&quot;</span><span class="p">,</span>
        <span class="n">policy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;force&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Installs data models, listed in the dependencies, in the osw.model.entity</span>
<span class="sd">        module.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dependencies</span>
<span class="sd">            A dictionary with the keys being the names of the dependencies and the</span>
<span class="sd">            values being the full page name (IRI) of the dependencies.</span>
<span class="sd">        mode</span>
<span class="sd">            The mode to use when loading the dependencies. Default is &#39;append&#39;,</span>
<span class="sd">            which will keep existing data models and only load the missing ones. The</span>
<span class="sd">            mode &#39;replace&#39; will replace all existing data models with the new ones.</span>
<span class="sd">        policy</span>
<span class="sd">            The policy to use when loading the dependencies. Default is &#39;force&#39;,</span>
<span class="sd">            which will always load the dependencies. If policy is &#39;if-missing&#39;,</span>
<span class="sd">            dependencies will only be loaded if they are not already installed.</span>
<span class="sd">            This may lead to outdated dependencies, if the dependencies have been</span>
<span class="sd">            updated on the server. If policy is &#39;if-outdated&#39;, dependencies will only</span>
<span class="sd">            be loaded if they were updated on the server. (not implemented yet)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">dependencies</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">default_params</span><span class="o">.</span><span class="n">dependencies</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;No &#39;dependencies&#39; parameter was passed to &quot;</span>
                    <span class="s2">&quot;install_dependencies() and &quot;</span>
                    <span class="s2">&quot;osw.defaults.params.dependencies was not set!&quot;</span>
                <span class="p">)</span>
            <span class="n">dependencies</span> <span class="o">=</span> <span class="n">default_params</span><span class="o">.</span><span class="n">dependencies</span>
        <span class="n">schema_fpts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dependencies</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">policy</span> <span class="o">!=</span> <span class="s2">&quot;if-missing&quot;</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
                <span class="n">schema_fpts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">policy</span> <span class="o">==</span> <span class="s2">&quot;if-outdated&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                    <span class="s2">&quot;The policy &#39;if-outdated&#39; is not implemented yet.&quot;</span>
                <span class="p">)</span>
        <span class="n">schema_fpts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">schema_fpts</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">schema_fpt</span> <span class="ow">in</span> <span class="n">schema_fpts</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">schema_fpt</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Full page title &#39;</span><span class="si">{</span><span class="n">schema_fpt</span><span class="si">}</span><span class="s2">&#39; does not have the correct format. &quot;</span>
                    <span class="s2">&quot;It should be &#39;Namespace:Name&#39;.&quot;</span>
                <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fetch_schema</span><span class="p">(</span><span class="n">OSW</span><span class="o">.</span><span class="n">FetchSchemaParam</span><span class="p">(</span><span class="n">schema_title</span><span class="o">=</span><span class="n">schema_fpts</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_dependencies</span><span class="p">(</span><span class="n">dependencies</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the dependencies are installed in the osw.model.entity module.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dependencies</span>
<span class="sd">            A dictionary with the keys being the names of the dependencies and the</span>
<span class="sd">            values being the full page name (IRI) of the dependencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">dep</span> <span class="k">for</span> <span class="n">dep</span> <span class="ow">in</span> <span class="n">dependencies</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">dep</span><span class="p">)]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">ensure_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure that the dependencies are installed in the osw.model.entity module.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dependencies</span>
<span class="sd">            A dictionary with the keys being the names of the dependencies and the</span>
<span class="sd">            values being the full page name (IRI) of the dependencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_dependencies</span><span class="p">(</span><span class="n">dependencies</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">install_dependencies</span><span class="p">(</span><span class="n">dependencies</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">LoadEntityParam</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Param for load_entity()&quot;&quot;&quot;</span>

        <span class="n">titles</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The pages titles to load - one or multiple titles (wiki page name) of</span>
<span class="sd">        entities&quot;&quot;&quot;</span>
        <span class="n">autofetch_schema</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If true, load the corresponding schemas /</span>
<span class="sd">        categories ad-hoc if not already present&quot;&quot;&quot;</span>
        <span class="n">model_to_use</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If provided this model will be used to create an entity (instance of the</span>
<span class="sd">        model), instead of instantiating the autofetched schema.&quot;&quot;&quot;</span>
        <span class="n">remove_empty</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If true, remove key with an empty string, list, dict or set as value</span>
<span class="sd">        from the jsondata.&quot;&quot;&quot;</span>
        <span class="n">disable_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If true, disable the cache for the loading process&quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">titles</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">titles</span><span class="p">]</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">LoadEntityResult</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Result of load_entity()&quot;&quot;&quot;</span>

        <span class="n">entities</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">]]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The dataclass instance(s)&quot;&quot;&quot;</span>

    <span class="c1"># fmt: off</span>
    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_title</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">]:</span>
        <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_title</span><span class="p">:</span> <span class="n">LoadEntityParam</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LoadEntityResult</span><span class="p">:</span>
        <span class="o">...</span>

    <span class="c1"># fmt: on</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_entity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity_title</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">LoadEntityParam</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">],</span> <span class="n">LoadEntityResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads the entity with the given wiki page name from the OSW instance.</span>
<span class="sd">        Creates an instance of the class specified by the &quot;type&quot; attribute, default</span>
<span class="sd">        model.Entity. An instance of model.Entity can be cast to any subclass with</span>
<span class="sd">        .cast(model.&lt;class&gt;) .</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        entity_title</span>
<span class="sd">            the wiki page name</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            the dataclass instance if only a single title is given</span>
<span class="sd">            a list of dataclass instances if a list of titles is given</span>
<span class="sd">            a LoadEntityResult instance if a LoadEntityParam is given</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity_title</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">param</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">LoadEntityParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">entity_title</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity_title</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">param</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">LoadEntityParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="n">entity_title</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">param</span> <span class="o">=</span> <span class="n">entity_title</span>

        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">model_to_use</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using schema </span><span class="si">{</span><span class="n">param</span><span class="o">.</span><span class="n">model_to_use</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> to create entity&quot;</span><span class="p">)</span>

        <span class="c1"># store original cache state</span>
        <span class="n">cache_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_cache_enabled</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">disable_cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">disable_cache</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">cache_state</span> <span class="ow">and</span> <span class="n">param</span><span class="o">.</span><span class="n">disable_cache</span><span class="p">:</span>
            <span class="c1"># enable cache to speed up loading</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">enable_cache</span><span class="p">()</span>

        <span class="n">entities</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">titles</span><span class="p">))</span><span class="o">.</span><span class="n">pages</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">pages</span><span class="p">:</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">schemas</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">schemas_fetched</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">jsondata</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsondata&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">remove_empty</span><span class="p">:</span>
                <span class="n">remove_empty</span><span class="p">(</span><span class="n">jsondata</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">jsondata</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">jsondata</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]:</span>
                    <span class="n">schema</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">category</span><span class="p">]))</span>
                        <span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="n">schemas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
                    <span class="c1"># generate model if not already exists</span>
                    <span class="n">cls_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">schema</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span>
                    <span class="c1"># If a schema_to_use is provided, we do not need to check if the</span>
                    <span class="c1">#  model exists</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">param</span><span class="o">.</span><span class="n">model_to_use</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">cls_name</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">autofetch_schema</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">fetch_schema</span><span class="p">(</span>
                                    <span class="n">OSW</span><span class="o">.</span><span class="n">FetchSchemaParam</span><span class="p">(</span>
                                        <span class="n">schema_title</span><span class="o">=</span><span class="n">category</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;append&quot;</span>
                                    <span class="p">)</span>
                                <span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">cls_name</span><span class="p">):</span>
                            <span class="n">schemas_fetched</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="nb">print</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;Error: Model </span><span class="si">{</span><span class="n">cls_name</span><span class="si">}</span><span class="s2"> not found. Schema </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2"> &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;needs to be fetched first.&quot;</span>
                            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">schemas_fetched</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">model_to_use</span><span class="p">:</span>
                <span class="n">entity</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">OswBaseModel</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">model_to_use</span><span class="p">(</span><span class="o">**</span><span class="n">jsondata</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">schemas</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: no schema defined&quot;</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">schemas</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">schemas</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;title&quot;</span><span class="p">])</span>
                <span class="n">entity</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">Entity</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">jsondata</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">bases</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">schemas</span><span class="p">:</span>
                    <span class="n">bases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">schema</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]))</span>
                <span class="bp">cls</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="n">__base__</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">bases</span><span class="p">))</span>
                <span class="n">entity</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">Entity</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">jsondata</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">entity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># make sure we do not override existing metadata</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">entity</span><span class="o">.</span><span class="n">meta</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">entity</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Meta</span><span class="p">()</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="p">,</span> <span class="s2">&quot;wiki_page&quot;</span><span class="p">)</span>
                    <span class="ow">or</span> <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="p">):</span>
                    <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">WikiPage</span><span class="p">()</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">namespace</span> <span class="o">=</span> <span class="n">namespace_from_full_title</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title_from_full_title</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>

            <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="c1"># restore original cache state</span>
        <span class="k">if</span> <span class="n">cache_state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">enable_cache</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">disable_cache</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity_title</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># single title</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">entities</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity_title</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>  <span class="c1"># list of titles</span>
            <span class="k">return</span> <span class="n">entities</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity_title</span><span class="p">,</span> <span class="n">OSW</span><span class="o">.</span><span class="n">LoadEntityParam</span><span class="p">):</span>  <span class="c1"># LoadEntityParam</span>
            <span class="k">return</span> <span class="n">OSW</span><span class="o">.</span><span class="n">LoadEntityResult</span><span class="p">(</span><span class="n">entities</span><span class="o">=</span><span class="n">entities</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">OverwriteClassParam</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]</span>  <span class="c1"># ModelMetaclass</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The model class for which this is the overwrite params object.&quot;&quot;&quot;</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OVERWRITE_CLASS_OPTIONS</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Defines the overall overwriting behavior. Used for any property if the</span>
<span class="sd">        property specific setting is not set.&quot;&quot;&quot;</span>
        <span class="n">per_property</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OverwriteOptions</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A key (property name) - value (overwrite setting) pair.&quot;&quot;&quot;</span>
        <span class="n">_per_property</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OVERWRITE_CLASS_OPTIONS</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Private property, for internal use only. Use &#39;per_property&#39; instead&quot;&quot;&quot;</span>

        <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;per_property&quot;</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">validate_per_property</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">per_property</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
            <span class="n">model_</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">)</span>
            <span class="n">field_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">model_</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">per_property</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="n">field_names</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">):</span>
                <span class="n">missing_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">]</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Property not found in model: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">missing_keys</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="n">per_property</span>

        <span class="k">def</span><span class="w"> </span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Called when setting an attribute&quot;&quot;&quot;</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;per_property&quot;</span><span class="p">:</span>
                <span class="c1"># compare value and self.per_property</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="n">field_name</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="p">}</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="n">field_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="p">}</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;model&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="n">field_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="p">}</span>

        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Called after validation. Sets the fallback for every property that</span>
<span class="sd">            has not been specified in per_property.&quot;&quot;&quot;</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
            <span class="n">per_property_</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">per_property_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">field_name</span><span class="p">:</span> <span class="n">per_property_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="c1"># todo: from class definition get properties with hidden /</span>
            <span class="c1">#  read_only option  #  those can be safely overwritten - set the to True</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">get_overwrite_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">property_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OverwriteOptions</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Returns the fallback overwrite option for the given field name&quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">property_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">_ApplyOverwriteParam</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
        <span class="n">page</span><span class="p">:</span> <span class="n">WtPage</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">OswBaseModel</span>  <span class="c1"># actually model.Entity but this causes the &quot;type&quot; error</span>
        <span class="n">policy</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span><span class="p">,</span> <span class="n">OVERWRITE_CLASS_OPTIONS</span><span class="p">]</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="n">remove_empty</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">inplace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">debug</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">offline</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
            <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;entity&quot;</span><span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">validate_entity</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Make sure that the passed entity has the same uuid as the page&quot;&quot;&quot;</span>
            <span class="n">page</span><span class="p">:</span> <span class="n">WtPage</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;page&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">page</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>  <span class="c1"># Guard clause</span>
                <span class="k">return</span> <span class="n">entity</span>
            <span class="n">jsondata</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsondata&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">jsondata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Guard clause</span>
                <span class="n">title</span> <span class="o">=</span> <span class="n">title_from_full_title</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">uuid_from_title</span> <span class="o">=</span> <span class="n">get_uuid</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Error: UUID could not be determined from title: &#39;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;, &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;nor fromjsondata: </span><span class="si">{</span><span class="n">jsondata</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">return</span> <span class="n">entity</span>
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid_from_title</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">uuid</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;UUID mismatch: Page UUID: </span><span class="si">{</span><span class="n">uuid_from_title</span><span class="si">}</span><span class="s2">, &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;Entity UUID: </span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">uuid</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="k">return</span> <span class="n">entity</span>
            <span class="n">page_uuid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">jsondata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;uuid&quot;</span><span class="p">))</span>
            <span class="n">entity_uuid</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;uuid&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">page_uuid</span> <span class="o">!=</span> <span class="n">entity_uuid</span> <span class="ow">or</span> <span class="n">page_uuid</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                <span class="c1"># Comparing string type UUIDs</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;UUID mismatch: Page UUID: </span><span class="si">{</span><span class="n">page_uuid</span><span class="si">}</span><span class="s2">, Entity UUID: </span><span class="si">{</span><span class="n">entity_uuid</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">entity</span>

        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span> <span class="o">=</span> <span class="n">get_namespace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Namespace could not be determined.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">policy</span><span class="p">,</span> <span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">policy</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span><span class="p">(</span>
                    <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">entity</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span>
                    <span class="n">overwrite</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">policy</span><span class="p">,</span>
                <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_apply_overwrite_policy</span><span class="p">(</span><span class="n">param</span><span class="p">:</span> <span class="n">OSW</span><span class="o">.</span><span class="n">_ApplyOverwriteParam</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WtPage</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">inplace</span><span class="p">:</span>
            <span class="n">page</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">page</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">page</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">page</span><span class="p">)</span>
        <span class="n">entity_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">param</span><span class="o">.</span><span class="n">namespace</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">get_title</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">entity</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">set_content</span><span class="p">(</span><span class="n">content_to_set</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;content_to_set: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">content_to_set</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">slot_</span> <span class="ow">in</span> <span class="n">content_to_set</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">page</span><span class="o">.</span><span class="n">set_slot_content</span><span class="p">(</span><span class="n">slot_</span><span class="p">,</span> <span class="n">content_to_set</span><span class="p">[</span><span class="n">slot_</span><span class="p">])</span>

        <span class="c1"># Create a variable to hold the new content</span>
        <span class="n">new_content</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># required for json parsing and header rendering</span>
            <span class="s2">&quot;header&quot;</span><span class="p">:</span> <span class="s2">&quot;{{#invoke:Entity|header}}&quot;</span><span class="p">,</span>
            <span class="c1"># required for footer rendering</span>
            <span class="s2">&quot;footer&quot;</span><span class="p">:</span> <span class="s2">&quot;{{#invoke:Entity|footer}}&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="c1"># Take the shortcut if</span>
        <span class="c1"># 1. page does not exist AND any setting of overwrite</span>
        <span class="c1"># 2. overwrite is &quot;replace remote&quot;</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="n">page</span><span class="o">.</span><span class="n">exists</span>
            <span class="ow">or</span> <span class="n">param</span><span class="o">.</span><span class="n">policy</span><span class="o">.</span><span class="n">overwrite</span> <span class="o">==</span> <span class="n">AddOverwriteClassOptions</span><span class="o">.</span><span class="n">replace_remote</span>
            <span class="ow">or</span> <span class="n">param</span><span class="o">.</span><span class="n">offline</span> <span class="ow">is</span> <span class="kc">True</span>
        <span class="p">):</span>
            <span class="c1"># Use pydantic serialization, skip none values:</span>
            <span class="n">new_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">entity</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">remove_empty</span><span class="p">:</span>
                <span class="n">remove_empty</span><span class="p">(</span><span class="n">new_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">])</span>
            <span class="n">set_content</span><span class="p">(</span><span class="n">new_content</span><span class="p">)</span>
            <span class="n">page</span><span class="o">.</span><span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="n">page</span>  <span class="c1"># Guard clause --&gt; exit function</span>
        <span class="c1"># 3. pages does exist AND overwrite is &quot;keep existing&quot;</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">page</span><span class="o">.</span><span class="n">exists</span>
            <span class="ow">and</span> <span class="n">param</span><span class="o">.</span><span class="n">policy</span><span class="o">.</span><span class="n">overwrite</span> <span class="o">==</span> <span class="n">AddOverwriteClassOptions</span><span class="o">.</span><span class="n">keep_existing</span>
        <span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Entity &#39;</span><span class="si">{</span><span class="n">entity_title</span><span class="si">}</span><span class="s2">&#39; already exists and won&#39;t be stored &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;with overwrite set to &#39;keep existing&#39;!&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">page</span>  <span class="c1"># Guard clause --&gt; exit function</span>
        <span class="c1"># Apply the overwrite logic in any other case</span>
        <span class="c1"># 4. If per_property was None  -&gt; overwrite will be used as a fallback</span>
        <span class="c1"># 4.1 If overwrite is True ---&gt; overwrite existing properties</span>
        <span class="c1"># 4.2 If overwrite is False --&gt; don&#39;t overwrite existing properties</span>
        <span class="c1"># 4.3 If overwrite is &quot;only empty&quot; --&gt; overwrite existing properties if</span>
        <span class="c1">#     they are empty</span>
        <span class="c1"># * Download page</span>
        <span class="c1"># * Merge slots selectively based on per_property</span>

        <span class="c1"># Create variables to hold local and remote content prior to merging</span>
        <span class="n">local_content</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">remote_content</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># Get the remote content</span>
        <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">,</span> <span class="s2">&quot;header&quot;</span><span class="p">,</span> <span class="s2">&quot;footer&quot;</span><span class="p">]:</span>  <span class="c1"># SLOTS:</span>
            <span class="n">remote_content</span><span class="p">[</span><span class="n">slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
            <span class="c1"># Todo: remote content does not contain properties that are not set</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">remove_empty</span><span class="p">:</span>
            <span class="n">remove_empty</span><span class="p">(</span><span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;header&quot;</span><span class="p">]:</span>  <span class="c1"># not None or {} or &quot;&quot;</span>
            <span class="n">new_content</span><span class="p">[</span><span class="s2">&quot;header&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;header&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;footer&quot;</span><span class="p">]:</span>
            <span class="n">new_content</span><span class="p">[</span><span class="s2">&quot;footer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;footer&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;remote_content&#39;: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">remote_content</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># Get the local content</span>
        <span class="c1"># Properties that are not set in the local content will be set to None</span>
        <span class="c1"># We want those not to be listed as keys</span>
        <span class="n">local_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">entity</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">remove_empty</span><span class="p">:</span>
            <span class="n">remove_empty</span><span class="p">(</span><span class="n">local_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;local_content&#39;: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">local_content</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># Apply the overwrite logic</span>
        <span class="c1"># a) If there is a key in the remote content that is not in the local</span>
        <span class="c1">#    content, we have to keep it</span>
        <span class="k">if</span> <span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">new_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span>
        <span class="c1"># new_content[&quot;jsondata&quot;] = {</span>
        <span class="c1">#     key: value</span>
        <span class="c1">#     for (key, value) in remote_content[&quot;jsondata&quot;].items()</span>
        <span class="c1">#     if key not in local_content[&quot;jsondata&quot;].keys()</span>
        <span class="c1"># }</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;New content&#39; after &#39;remote&#39; update: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">new_content</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># b) If there is a key in the local content that is not in the remote</span>
        <span class="c1">#    content, we have to keep it</span>
        <span class="n">new_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">key</span><span class="p">:</span> <span class="n">value</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">local_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;New content&#39; after &#39;local&#39; update: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">new_content</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># c) If there is a key in both contents, we have to apply the overwrite</span>
        <span class="c1">#    logic</span>
        <span class="c1"># todo: include logic for hidden and read_only properties!</span>
        <span class="n">new_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">key</span><span class="p">:</span> <span class="n">value</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">local_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">policy</span><span class="o">.</span><span class="n">get_overwrite_setting</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">OverwriteOptions</span><span class="o">.</span><span class="n">true</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;New content&#39; after &#39;True&#39; update: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">new_content</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">new_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">key</span><span class="p">:</span> <span class="n">value</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">policy</span><span class="o">.</span><span class="n">get_overwrite_setting</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">OverwriteOptions</span><span class="o">.</span><span class="n">false</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;New content&#39; after &#39;False&#39; update: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">new_content</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">new_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">key</span><span class="p">:</span> <span class="n">value</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">local_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">param</span><span class="o">.</span><span class="n">policy</span><span class="o">.</span><span class="n">get_overwrite_setting</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="o">==</span> <span class="n">OverwriteOptions</span><span class="o">.</span><span class="n">only_empty</span>
                    <span class="ow">and</span> <span class="n">is_empty</span><span class="p">(</span><span class="n">remote_content</span><span class="p">[</span><span class="s2">&quot;jsondata&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
                <span class="p">)</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;New content&#39; after &#39;only empty&#39; update: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">new_content</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;New content&#39; to be stored: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">new_content</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">set_content</span><span class="p">(</span><span class="n">new_content</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">page</span>  <span class="c1"># Guard clause --&gt; exit function</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">StoreEntityParam</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
        <span class="n">entities</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>  <span class="c1"># actually model.Entity</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The entities to store. Can be a single entity or a list of entities.&quot;&quot;&quot;</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The namespace of the entities. If not set, the namespace is derived from the</span>
<span class="sd">        entity.&quot;&quot;&quot;</span>
        <span class="n">parallel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If set to True, the entities are stored in parallel.&quot;&quot;&quot;</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OVERWRITE_CLASS_OPTIONS</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;keep existing&quot;</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If no class specific overwrite setting is set, this setting is used.&quot;&quot;&quot;</span>
        <span class="n">overwrite_per_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of OverwriteClassParam objects. If a class specific overwrite setting</span>
<span class="sd">        is set, this setting is used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">remove_empty</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If true, remove key with an empty string value from the jsondata.&quot;&quot;&quot;</span>
        <span class="n">change_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;ID to document the change. Entities within the same store_entity() call will</span>
<span class="sd">        share the same change_id. This parameter can also be used to link multiple</span>
<span class="sd">        store_entity() calls.&quot;&quot;&quot;</span>
        <span class="n">bot_edit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mark the edit as bot edit,</span>
<span class="sd">        which hides the edit from the recent changes in the default filer&quot;&quot;&quot;</span>
        <span class="n">edit_comment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Additional comment to explain the edit.&quot;&quot;&quot;</span>
        <span class="n">meta_category_title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="s2">&quot;Category:Category&quot;</span>
        <span class="n">debug</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">offline</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If set to True, the processed entities are not upload but only returned as WtPages.</span>
<span class="sd">        Can be used to create WtPage objects from entities without uploading them.&quot;&quot;&quot;</span>
        <span class="n">_overwrite_per_class</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">PrivateAttr</span><span class="p">()</span>
        <span class="p">)</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Private attribute, for internal use only. Use &#39;overwrite_per_class&#39;</span>
<span class="sd">        instead.&quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">entities</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">change_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">entity</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Meta</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">change_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">change_id</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">change_id</span><span class="p">:</span>
                    <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">change_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="kc">True</span>  <span class="c1"># Set to True after implementation of asynchronous upload</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="s2">&quot;overwrite&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_overwrite_per_class</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;by name&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;by type&quot;</span><span class="p">:</span> <span class="p">{}}</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite_per_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite_per_class</span><span class="p">:</span>
                    <span class="n">model_name</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span>
                    <span class="n">model_type</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_default</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="n">model_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overwrite_per_class</span><span class="p">[</span><span class="s2">&quot;by name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                        <span class="ow">or</span> <span class="n">model_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overwrite_per_class</span><span class="p">[</span><span class="s2">&quot;by type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="p">):</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;More than one OverwriteClassParam for the class &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">model_type</span><span class="si">}</span><span class="s2">&#39; (</span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">) has been passed in the &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;list to &#39;overwrite_per_class&#39;!&quot;</span>
                        <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_overwrite_per_class</span><span class="p">[</span><span class="s2">&quot;by name&quot;</span><span class="p">][</span><span class="n">model_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">param</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_overwrite_per_class</span><span class="p">[</span><span class="s2">&quot;by type&quot;</span><span class="p">][</span><span class="n">model_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">param</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">StoreEntityResult</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Result of store_entity()&quot;&quot;&quot;</span>

        <span class="n">change_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The ID of the change&quot;&quot;&quot;</span>
        <span class="n">pages</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">WtPage</span><span class="p">]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The pages that have been stored&quot;&quot;&quot;</span>

        <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
            <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">store_entity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">StoreEntityParam</span><span class="p">,</span> <span class="n">OswBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StoreEntityResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;stores the given dataclass instance as OSW page by calling BaseModel.json()</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        param:</span>
<span class="sd">            StoreEntityParam, the dataclass instance or a list of instances</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">):</span>
            <span class="n">param</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">StoreEntityParam</span><span class="p">(</span><span class="n">entities</span><span class="o">=</span><span class="p">[</span><span class="n">param</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">param</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">StoreEntityParam</span><span class="p">(</span><span class="n">entities</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">param</span><span class="o">.</span><span class="n">entities</span> <span class="o">=</span> <span class="p">[</span><span class="n">param</span><span class="o">.</span><span class="n">entities</span><span class="p">]</span>

        <span class="n">param</span><span class="p">:</span> <span class="n">OSW</span><span class="o">.</span><span class="n">StoreEntityParam</span> <span class="o">=</span> <span class="n">param</span>

        <span class="n">max_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span>
        <span class="n">created_pages</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">meta_category_templates</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">namespace</span> <span class="o">==</span> <span class="s2">&quot;Category&quot;</span><span class="p">:</span>
            <span class="n">meta_category_titles</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">meta_category_title</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">meta_category_titles</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">meta_category_titles</span> <span class="o">=</span> <span class="p">[</span><span class="n">meta_category_titles</span><span class="p">]</span>
            <span class="n">meta_category_template_strs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1"># We have to do this iteratively to support meta categories inheritance</span>
            <span class="k">while</span> <span class="n">meta_category_titles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">meta_category_titles</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">meta_categories</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span>
                    <span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="n">meta_category_titles</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">pages</span>
                <span class="k">for</span> <span class="n">meta_category</span> <span class="ow">in</span> <span class="n">meta_categories</span><span class="p">:</span>
                    <span class="n">meta_category_template_strs</span><span class="p">[</span><span class="n">meta_category</span><span class="o">.</span><span class="n">title</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">meta_category</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;schema_template&quot;</span><span class="p">)</span>
                    <span class="p">)</span>

                <span class="n">meta_category_titles</span> <span class="o">=</span> <span class="n">meta_category</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsondata&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="s2">&quot;subclass_of&quot;</span>
                <span class="p">)</span>

            <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">meta_category_template_strs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">meta_category_template_str</span> <span class="o">=</span> <span class="n">meta_category_template_strs</span><span class="p">[</span><span class="n">title</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">meta_category_template_str</span><span class="p">:</span>
                    <span class="n">meta_category_templates</span><span class="p">[</span><span class="n">title</span><span class="p">]</span> <span class="o">=</span> <span class="n">compile_handlebars_template</span><span class="p">(</span>
                        <span class="n">meta_category_template_str</span>
                    <span class="p">)</span>
            <span class="c1"># inverse order to have the most generic template first</span>
            <span class="n">meta_category_templates</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">meta_category_templates</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">store_entity_</span><span class="p">(</span>
            <span class="n">entity_</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">,</span>
            <span class="n">namespace_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">overwrite_class_param</span><span class="p">:</span> <span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">title_</span> <span class="o">=</span> <span class="n">get_title</span><span class="p">(</span><span class="n">entity_</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">namespace_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">namespace_</span> <span class="o">=</span> <span class="n">get_namespace</span><span class="p">(</span><span class="n">entity_</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">namespace_</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">title_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Unsupported entity type&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="n">overwrite_class_param</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;overwrite_class_param&#39; must not be None!&quot;</span><span class="p">)</span>
            <span class="n">entity_title</span> <span class="o">=</span> <span class="n">namespace_</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">title_</span>
            <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_overwrite_policy</span><span class="p">(</span>
                <span class="n">OSW</span><span class="o">.</span><span class="n">_ApplyOverwriteParam</span><span class="p">(</span>
                    <span class="n">page</span><span class="o">=</span><span class="n">WtPage</span><span class="p">(</span>
                        <span class="n">wtSite</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">entity_title</span><span class="p">,</span> <span class="n">do_init</span><span class="o">=</span><span class="ow">not</span> <span class="n">param</span><span class="o">.</span><span class="n">offline</span>
                    <span class="p">),</span>
                    <span class="n">entity</span><span class="o">=</span><span class="n">entity_</span><span class="p">,</span>
                    <span class="n">namespace</span><span class="o">=</span><span class="n">namespace_</span><span class="p">,</span>
                    <span class="n">policy</span><span class="o">=</span><span class="n">overwrite_class_param</span><span class="p">,</span>
                    <span class="n">remove_empty</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">remove_empty</span><span class="p">,</span>
                    <span class="n">debug</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
                    <span class="n">offline</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">offline</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">meta_category_templates</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">generated_schemas</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">jsondata</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsondata&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">remove_empty</span><span class="p">:</span>
                        <span class="n">remove_empty</span><span class="p">(</span><span class="n">jsondata</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">meta_category_templates</span><span class="p">:</span>
                        <span class="n">meta_category_template</span> <span class="o">=</span> <span class="n">meta_category_templates</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                        <span class="n">schema_str</span> <span class="o">=</span> <span class="n">eval_compiled_handlebars_template</span><span class="p">(</span>
                            <span class="n">meta_category_template</span><span class="p">,</span>
                            <span class="n">escape_json_strings</span><span class="p">(</span><span class="n">jsondata</span><span class="p">),</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;_page_title&quot;</span><span class="p">:</span> <span class="n">entity_title</span><span class="p">,</span>  <span class="c1"># Legacy</span>
                                <span class="s2">&quot;_current_subject_&quot;</span><span class="p">:</span> <span class="n">entity_title</span><span class="p">,</span>
                            <span class="p">},</span>
                        <span class="p">)</span>
                        <span class="n">generated_schemas</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">schema_str</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema generation from template failed for </span><span class="si">{</span><span class="n">entity_</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="n">mode</span> <span class="o">=</span> <span class="n">AggregateGeneratedSchemasParamMode</span><span class="o">.</span><span class="n">ROOT_LEVEL</span>
                <span class="c1"># Put generated schema in definitions section,</span>
                <span class="c1">#  currently only enabled for Characteristics</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;CharacteristicType&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
                    <span class="n">entity_</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">CharacteristicType</span>
                <span class="p">):</span>
                    <span class="n">mode</span> <span class="o">=</span> <span class="n">AggregateGeneratedSchemasParamMode</span><span class="o">.</span><span class="n">DEFINITIONS_SECTION</span>

                <span class="n">new_schema</span> <span class="o">=</span> <span class="n">aggregate_generated_schemas</span><span class="p">(</span>
                    <span class="n">AggregateGeneratedSchemasParam</span><span class="p">(</span>
                        <span class="n">schema</span><span class="o">=</span><span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">),</span>
                        <span class="n">generated_schemas</span><span class="o">=</span><span class="n">generated_schemas</span><span class="p">,</span>
                        <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">aggregated_schema</span>
                <span class="n">page</span><span class="o">.</span><span class="n">set_slot_content</span><span class="p">(</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">,</span> <span class="n">new_schema</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">offline</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">page</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span>
                    <span class="n">param</span><span class="o">.</span><span class="n">edit_comment</span><span class="p">,</span> <span class="n">bot_edit</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">bot_edit</span>
                <span class="p">)</span>  <span class="c1"># will set page.changed if the content of the page has changed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">param</span><span class="o">.</span><span class="n">offline</span> <span class="ow">and</span> <span class="n">page</span><span class="o">.</span><span class="n">changed</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity stored at &#39;</span><span class="si">{</span><span class="n">page</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_index</span><span class="si">}</span><span class="s2">) Entity stored at &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">page</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                    <span class="p">)</span>
            <span class="n">created_pages</span><span class="p">[</span><span class="n">page</span><span class="o">.</span><span class="n">title</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span>

        <span class="n">sorted_entities</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">sort_list_of_entities_by_class</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;Entities to be uploaded have been sorted according to their type.</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;If you would like to overwrite existing entities or properties, &quot;</span>
            <span class="s2">&quot;pass a StoreEntityParam to store_entity() with &quot;</span>
            <span class="s2">&quot;attribute &#39;overwrite&#39; or &#39;overwrite_per_class&#39; set to, e.g., &quot;</span>
            <span class="s2">&quot;True.&quot;</span>
        <span class="p">)</span>

        <span class="k">class</span><span class="w"> </span><span class="nc">UploadObject</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
            <span class="n">entity</span><span class="p">:</span> <span class="n">OswBaseModel</span>
            <span class="c1"># Actually model.Entity but this causes the &quot;type&quot; error</span>
            <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
            <span class="n">index</span><span class="p">:</span> <span class="nb">int</span>
            <span class="n">overwrite_class_param</span><span class="p">:</span> <span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span>

        <span class="n">upload_object_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">UploadObject</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">upload_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">class_type</span><span class="p">,</span> <span class="n">entities</span> <span class="ow">in</span> <span class="n">sorted_entities</span><span class="o">.</span><span class="n">by_type</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># Try to get a class specific overwrite setting</span>
            <span class="n">class_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">_overwrite_per_class</span><span class="p">[</span><span class="s2">&quot;by type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">class_type</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">class_param</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">entity_model</span> <span class="o">=</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__class__</span>
                <span class="n">class_param</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span><span class="p">(</span>
                    <span class="n">model</span><span class="o">=</span><span class="n">entity_model</span><span class="p">,</span>
                    <span class="n">overwrite</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">overwrite</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Now adding entities of class type &#39;</span><span class="si">{</span><span class="n">class_type</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">entity_model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">) to upload list. No class specific&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot; overwrite setting found. Using fallback option &#39;&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">param</span><span class="o">.</span><span class="n">overwrite</span><span class="si">}</span><span class="s2">&#39; for all entities of this class.&quot;</span>
                    <span class="p">)</span>
            <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
                <span class="n">upload_object_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">UploadObject</span><span class="p">(</span>
                        <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
                        <span class="n">namespace</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">namespace</span><span class="p">,</span>
                        <span class="n">index</span><span class="o">=</span><span class="n">upload_index</span><span class="p">,</span>
                        <span class="n">overwrite_class_param</span><span class="o">=</span><span class="n">class_param</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="n">upload_index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">handle_upload_object_</span><span class="p">(</span><span class="n">upload_object</span><span class="p">:</span> <span class="n">UploadObject</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">store_entity_</span><span class="p">(</span>
                <span class="n">upload_object</span><span class="o">.</span><span class="n">entity</span><span class="p">,</span>
                <span class="n">upload_object</span><span class="o">.</span><span class="n">namespace</span><span class="p">,</span>
                <span class="n">upload_object</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
                <span class="n">upload_object</span><span class="o">.</span><span class="n">overwrite_class_param</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="n">parallelize</span><span class="p">(</span>
                <span class="n">handle_upload_object_</span><span class="p">,</span> <span class="n">upload_object_list</span><span class="p">,</span> <span class="n">flush_at_end</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">debug</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">handle_upload_object_</span><span class="p">(</span><span class="n">upload_object</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">upload_object</span> <span class="ow">in</span> <span class="n">upload_object_list</span>
            <span class="p">]</span>
        <span class="k">return</span> <span class="n">OSW</span><span class="o">.</span><span class="n">StoreEntityResult</span><span class="p">(</span><span class="n">change_id</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">change_id</span><span class="p">,</span> <span class="n">pages</span><span class="o">=</span><span class="n">created_pages</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">DeleteEntityParam</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
        <span class="n">entities</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>
        <span class="n">comment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">parallel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">debug</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">entities</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete_entity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">],</span> <span class="n">DeleteEntityParam</span><span class="p">],</span>
        <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deletes the given entity/entities from the OSW instance.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">OSW</span><span class="o">.</span><span class="n">DeleteEntityParam</span><span class="p">):</span>
            <span class="n">entity</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">DeleteEntityParam</span><span class="p">(</span><span class="n">entities</span><span class="o">=</span><span class="n">entity</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">entity</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">delete_entity_</span><span class="p">(</span><span class="n">entity_</span><span class="p">,</span> <span class="n">comment_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Deletes the given entity from the OSW instance.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            entity_:</span>
<span class="sd">                The dataclass instance to delete</span>
<span class="sd">            comment_:</span>
<span class="sd">                Command for the change log, by default None</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">title_</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">namespace_</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity_</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span> <span class="ow">and</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">title</span><span class="p">:</span>
                        <span class="n">title_</span> <span class="o">=</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">title</span>
                    <span class="k">if</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">namespace</span><span class="p">:</span>
                        <span class="n">namespace_</span> <span class="o">=</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">namespace</span>
            <span class="k">if</span> <span class="n">namespace_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">namespace_</span> <span class="o">=</span> <span class="n">get_namespace</span><span class="p">(</span><span class="n">entity_</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">title_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">title_</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">get_osw_id</span><span class="p">(</span><span class="n">entity_</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">namespace_</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">title_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Unsupported entity type&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">entity_title</span> <span class="o">=</span> <span class="n">namespace_</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">title_</span>
            <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">entity_title</span><span class="p">]))</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span>
                <span class="mi">0</span>
            <span class="p">]</span>

            <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
                <span class="n">page</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">comment_</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entity deleted: &quot;</span> <span class="o">+</span> <span class="n">page</span><span class="o">.</span><span class="n">get_url</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity &#39;</span><span class="si">{</span><span class="n">entity_title</span><span class="si">}</span><span class="s2">&#39; does not exist!&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="n">parallelize</span><span class="p">(</span>
                <span class="n">delete_entity_</span><span class="p">,</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span>
                <span class="n">flush_at_end</span><span class="o">=</span><span class="n">entity</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
                <span class="n">comment_</span><span class="o">=</span><span class="n">entity</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="p">[</span><span class="n">delete_entity_</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">entity</span><span class="o">.</span><span class="n">comment</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">entities</span><span class="p">]</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">QueryInstancesParam</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
        <span class="n">categories</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]],</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]]</span>
        <span class="p">]</span>
        <span class="n">parallel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">debug</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="n">_category_string_parts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
        <span class="n">_titles</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>

        <span class="nd">@staticmethod</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">get_full_page_name_parts</span><span class="p">(</span>
            <span class="n">category_</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
            <span class="n">error_msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Category must be a string like &#39;Category:&lt;category name&gt;&#39; or a &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;dataclass subclass with a &#39;type&#39; attribute. This error occurred on &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">category_</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">category_</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">string_to_split</span> <span class="o">=</span> <span class="n">category_</span>
            <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">category_</span><span class="p">,</span> <span class="n">OswBaseModel</span><span class="p">):</span>
                <span class="n">type_</span> <span class="o">=</span> <span class="n">category_</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">type_</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
                <span class="n">string_to_split</span> <span class="o">=</span> <span class="n">type_</span><span class="o">.</span><span class="n">default</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;Category:&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">string_to_split</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;namespace&quot;</span><span class="p">:</span> <span class="n">string_to_split</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">string_to_split</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="p">}</span>

        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">categories</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">categories</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_category_string_parts</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">OSW</span><span class="o">.</span><span class="n">QueryInstancesParam</span><span class="o">.</span><span class="n">get_full_page_name_parts</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">categories</span>
            <span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_titles</span> <span class="o">=</span> <span class="p">[</span><span class="n">parts</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">parts</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_category_string_parts</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">query_instances</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">],</span> <span class="n">OSW</span><span class="o">.</span><span class="n">QueryInstancesParam</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">OSW</span><span class="o">.</span><span class="n">QueryInstancesParam</span><span class="p">):</span>
            <span class="n">category</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">QueryInstancesParam</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="n">category</span><span class="p">)</span>
        <span class="n">page_titles</span> <span class="o">=</span> <span class="n">category</span><span class="o">.</span><span class="n">_titles</span>
        <span class="n">search_param</span> <span class="o">=</span> <span class="n">SearchParam</span><span class="p">(</span>
            <span class="n">query</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;[[HasType::Category:</span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2">]]&quot;</span> <span class="k">for</span> <span class="n">page_title</span> <span class="ow">in</span> <span class="n">page_titles</span><span class="p">],</span>
            <span class="o">**</span><span class="n">category</span><span class="o">.</span><span class="n">dict</span><span class="p">(</span>
                <span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;categories&quot;</span><span class="p">,</span> <span class="s2">&quot;_category_string_parts&quot;</span><span class="p">,</span> <span class="s2">&quot;_titles&quot;</span><span class="p">}</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">full_page_titles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">semantic_search</span><span class="p">(</span><span class="n">search_param</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">full_page_titles</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">JsonLdMode</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;enum for jsonld processing mode&quot;&quot;&quot;</span>

        <span class="n">expand</span> <span class="o">=</span> <span class="s2">&quot;expand&quot;</span>
        <span class="n">flatten</span> <span class="o">=</span> <span class="s2">&quot;flatten&quot;</span>
        <span class="n">compact</span> <span class="o">=</span> <span class="s2">&quot;compact&quot;</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="s2">&quot;frame&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">ExportJsonLdParams</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
        <span class="n">context_loader_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">WtSite</span><span class="o">.</span><span class="n">JsonLdContextLoaderParams</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The configuration for the JSON-LD context loader.&quot;&quot;&quot;</span>
        <span class="n">entities</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The entities to convert to JSON-LD. Can be a single entity or a list of</span>
<span class="sd">        entities.&quot;&quot;&quot;</span>
        <span class="n">id_keys</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;osw_id&quot;</span><span class="p">])</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The keys to use as @id in the JSON-LD output. If not found in the entity at root</span>
<span class="sd">        level, the full page title is used.&quot;&quot;&quot;</span>
        <span class="n">resolve_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If True, remote context URLs are resolved.&quot;&quot;&quot;</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OSW</span><span class="o">.</span><span class="n">JsonLdMode</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;expand&quot;</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The JSON-LD processing mode to apply if resolve_context is True.&quot;&quot;&quot;</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The JSON-LD context to apply. Replaces any existing context.&quot;&quot;&quot;</span>
        <span class="n">additional_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The JSON-LD context to apply on top of the existing context.&quot;&quot;&quot;</span>
        <span class="n">frame</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The JSON-LD frame to use for framed mode. If not set, the existing context is used&quot;&quot;&quot;</span>
        <span class="n">build_rdf_graph</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;If True, the output is a graph.&quot;&quot;&quot;</span>
        <span class="n">debug</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">entities</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">]</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">ExportJsonLdResult</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
        <span class="n">documents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A single JSON-LD document per entity&quot;&quot;&quot;</span>
        <span class="n">graph_document</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A single JSON-LD document with a @graph element containing all entities&quot;&quot;&quot;</span>
        <span class="n">graph</span><span class="p">:</span> <span class="n">rdflib</span><span class="o">.</span><span class="n">Graph</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;RDF graph containing all entities. Build only if build_rdf_graph is True&quot;&quot;&quot;</span>

        <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
            <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">export_jsonld</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">ExportJsonLdParams</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExportJsonLdResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Exports the given entity/entities as JSON-LD.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">resolve_context</span><span class="p">:</span>
            <span class="n">jsonld</span><span class="o">.</span><span class="n">set_document_loader</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_jsonld_context_loader</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">context_loader_config</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="n">documents</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">graph_document</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;@graph&quot;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="n">graph</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">build_rdf_graph</span><span class="p">:</span>
            <span class="n">graph</span> <span class="o">=</span> <span class="n">rdflib</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
            <span class="n">prefixes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_prefix_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">prefixes</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">[</span><span class="n">prefix</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">entities</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">id_keys</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># append &quot;@id&quot; mappings to the context in an additional object</span>
                <span class="n">id_mapping</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">id_keys</span><span class="p">:</span>
                    <span class="n">id_mapping</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;@id&quot;</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">id_mapping</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">:</span>
                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;/wiki/&quot;</span> <span class="o">+</span> <span class="n">t</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_jsonld_context_prefixes</span><span class="p">())</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">context</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">additional_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]]</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">additional_context</span><span class="p">)</span>

            <span class="c1"># if none of the id_keys is found, use the full title</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">k</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">id_keys</span><span class="p">):</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_full_title</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">resolve_context</span><span class="p">:</span>
                <span class="n">graph_document</span><span class="p">[</span><span class="s2">&quot;@graph&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">jsonld</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;expand&quot;</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">jsonld</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">params</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;flatten&quot;</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">jsonld</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">params</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;compact&quot;</span><span class="p">:</span>
                    <span class="c1"># data = jsonld.expand(data)</span>
                    <span class="c1"># if isinstance(data, list): data = data[0]</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">jsonld</span><span class="o">.</span><span class="n">compact</span><span class="p">(</span>
                        <span class="n">data</span><span class="p">,</span>
                        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">params</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="n">params</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;frame&quot;</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">jsonld</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span>
                        <span class="n">data</span><span class="p">,</span>
                        <span class="p">(</span>
                            <span class="p">{</span><span class="s2">&quot;@context&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]}</span>
                            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span>
                            <span class="k">else</span> <span class="n">params</span><span class="o">.</span><span class="n">frame</span>
                        <span class="p">),</span>
                    <span class="p">)</span>

                <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">build_rdf_graph</span><span class="p">:</span>
                    <span class="n">graph</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;json-ld&quot;</span><span class="p">)</span>

            <span class="n">documents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">ExportJsonLdResult</span><span class="p">(</span>
            <span class="n">documents</span><span class="o">=</span><span class="n">documents</span><span class="p">,</span> <span class="n">graph_document</span><span class="o">=</span><span class="n">graph_document</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="n">graph</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="osw.core.OSW.mw_site" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mw_site</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Returns the mwclient Site object of the OSW instance.</p>

    </div>

</div>


<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.ExportJsonLdParams" class="doc doc-heading">
            <code>ExportJsonLdParams</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="osw.model.static.OswBaseModel">OswBaseModel</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span>
<span class="normal">1587</span>
<span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span>
<span class="normal">1592</span>
<span class="normal">1593</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExportJsonLdParams</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
    <span class="n">context_loader_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">WtSite</span><span class="o">.</span><span class="n">JsonLdContextLoaderParams</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The configuration for the JSON-LD context loader.&quot;&quot;&quot;</span>
    <span class="n">entities</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The entities to convert to JSON-LD. Can be a single entity or a list of</span>
<span class="sd">    entities.&quot;&quot;&quot;</span>
    <span class="n">id_keys</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;osw_id&quot;</span><span class="p">])</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The keys to use as @id in the JSON-LD output. If not found in the entity at root</span>
<span class="sd">    level, the full page title is used.&quot;&quot;&quot;</span>
    <span class="n">resolve_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If True, remote context URLs are resolved.&quot;&quot;&quot;</span>
    <span class="n">mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OSW</span><span class="o">.</span><span class="n">JsonLdMode</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;expand&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The JSON-LD processing mode to apply if resolve_context is True.&quot;&quot;&quot;</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The JSON-LD context to apply. Replaces any existing context.&quot;&quot;&quot;</span>
    <span class="n">additional_context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The JSON-LD context to apply on top of the existing context.&quot;&quot;&quot;</span>
    <span class="n">frame</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The JSON-LD frame to use for framed mode. If not set, the existing context is used&quot;&quot;&quot;</span>
    <span class="n">build_rdf_graph</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If True, the output is a graph.&quot;&quot;&quot;</span>
    <span class="n">debug</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entities</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdParams.additional_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">additional_context</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The JSON-LD context to apply on top of the existing context.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdParams.build_rdf_graph" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">build_rdf_graph</span> <span class="o">=</span> <span class="kc">False</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>If True, the output is a graph.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdParams.context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">context</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The JSON-LD context to apply. Replaces any existing context.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdParams.context_loader_config" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">context_loader_config</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The configuration for the JSON-LD context loader.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdParams.entities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">entities</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The entities to convert to JSON-LD. Can be a single entity or a list of
entities.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdParams.frame" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">frame</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The JSON-LD frame to use for framed mode. If not set, the existing context is used</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdParams.id_keys" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">id_keys</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;osw_id&#39;</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The keys to use as @id in the JSON-LD output. If not found in the entity at root
level, the full page title is used.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdParams.mode" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;expand&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The JSON-LD processing mode to apply if resolve_context is True.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdParams.resolve_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">resolve_context</span> <span class="o">=</span> <span class="kc">True</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>If True, remote context URLs are resolved.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.ExportJsonLdResult" class="doc doc-heading">
            <code>ExportJsonLdResult</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="osw.model.static.OswBaseModel">OswBaseModel</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1595</span>
<span class="normal">1596</span>
<span class="normal">1597</span>
<span class="normal">1598</span>
<span class="normal">1599</span>
<span class="normal">1600</span>
<span class="normal">1601</span>
<span class="normal">1602</span>
<span class="normal">1603</span>
<span class="normal">1604</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ExportJsonLdResult</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
    <span class="n">documents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A single JSON-LD document per entity&quot;&quot;&quot;</span>
    <span class="n">graph_document</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A single JSON-LD document with a @graph element containing all entities&quot;&quot;&quot;</span>
    <span class="n">graph</span><span class="p">:</span> <span class="n">rdflib</span><span class="o">.</span><span class="n">Graph</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;RDF graph containing all entities. Build only if build_rdf_graph is True&quot;&quot;&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdResult.documents" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">documents</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>A single JSON-LD document per entity</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdResult.graph" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">graph</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>RDF graph containing all entities. Build only if build_rdf_graph is True</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.ExportJsonLdResult.graph_document" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">graph_document</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>A single JSON-LD document with a @graph element containing all entities</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.FetchSchemaMode" class="doc doc-heading">
            <code>FetchSchemaMode</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>Modes of the FetchSchemaParam class</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="osw.core.OSW.FetchSchemaMode.append">append</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>append to the current model</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="osw.core.OSW.FetchSchemaMode.replace">replace</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>replace the current model</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FetchSchemaMode</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Modes of the FetchSchemaParam class</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    append:</span>
<span class="sd">        append to the current model</span>
<span class="sd">    replace:</span>
<span class="sd">        replace the current model</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">append</span> <span class="o">=</span> <span class="s2">&quot;append&quot;</span>  <span class="c1"># append to the current model</span>
    <span class="n">replace</span> <span class="o">=</span> <span class="s2">&quot;replace&quot;</span>  <span class="c1"># replace the current model</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.FetchSchemaParam" class="doc doc-heading">
            <code>FetchSchemaParam</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.v1.BaseModel">BaseModel</span></code></p>


        <p>Param for fetch_schema()</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="osw.core.OSW.FetchSchemaParam.schema_title">schema_title</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="typing.List">List</span>[<span title="str">str</span>], <span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>one or multiple titles (wiki page name) of schemas (default: Category:Item)</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="osw.core.OSW.FetchSchemaParam.mode">mode</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>append or replace (default) current schema, see FetchSchemaMode</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">FetchSchemaParam</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Param for fetch_schema()</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    schema_title:</span>
<span class="sd">        one or multiple titles (wiki page name) of schemas (default: Category:Item)</span>
<span class="sd">    mode:</span>
<span class="sd">        append or replace (default) current schema, see FetchSchemaMode</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">schema_title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;Category:Item&quot;</span>
    <span class="n">mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;replace&quot;</span>
        <span class="c1"># type &#39;FetchSchemaMode&#39; requires: &#39;from __future__ import annotations&#39;</span>
    <span class="p">)</span>
    <span class="n">legacy_generator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;uses legacy command line for code generation if true&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.FetchSchemaParam.legacy_generator" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">legacy_generator</span> <span class="o">=</span> <span class="kc">False</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>uses legacy command line for code generation if true</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.JsonLdMode" class="doc doc-heading">
            <code>JsonLdMode</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="str">str</span></code>, <code><span title="enum.Enum">Enum</span></code></p>


        <p>enum for jsonld processing mode</p>







              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1559</span>
<span class="normal">1560</span>
<span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JsonLdMode</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;enum for jsonld processing mode&quot;&quot;&quot;</span>

    <span class="n">expand</span> <span class="o">=</span> <span class="s2">&quot;expand&quot;</span>
    <span class="n">flatten</span> <span class="o">=</span> <span class="s2">&quot;flatten&quot;</span>
    <span class="n">compact</span> <span class="o">=</span> <span class="s2">&quot;compact&quot;</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="s2">&quot;frame&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.LoadEntityParam" class="doc doc-heading">
            <code>LoadEntityParam</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.v1.BaseModel">BaseModel</span></code></p>


        <p>Param for load_entity()</p>







              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LoadEntityParam</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Param for load_entity()&quot;&quot;&quot;</span>

    <span class="n">titles</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The pages titles to load - one or multiple titles (wiki page name) of</span>
<span class="sd">    entities&quot;&quot;&quot;</span>
    <span class="n">autofetch_schema</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If true, load the corresponding schemas /</span>
<span class="sd">    categories ad-hoc if not already present&quot;&quot;&quot;</span>
    <span class="n">model_to_use</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If provided this model will be used to create an entity (instance of the</span>
<span class="sd">    model), instead of instantiating the autofetched schema.&quot;&quot;&quot;</span>
    <span class="n">remove_empty</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If true, remove key with an empty string, list, dict or set as value</span>
<span class="sd">    from the jsondata.&quot;&quot;&quot;</span>
    <span class="n">disable_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If true, disable the cache for the loading process&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">titles</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">titles</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">titles</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.LoadEntityParam.autofetch_schema" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">autofetch_schema</span> <span class="o">=</span> <span class="kc">True</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>If true, load the corresponding schemas /
categories ad-hoc if not already present</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.LoadEntityParam.disable_cache" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">disable_cache</span> <span class="o">=</span> <span class="kc">False</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>If true, disable the cache for the loading process</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.LoadEntityParam.model_to_use" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">model_to_use</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>If provided this model will be used to create an entity (instance of the
model), instead of instantiating the autofetched schema.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.LoadEntityParam.remove_empty" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_empty</span> <span class="o">=</span> <span class="kc">True</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>If true, remove key with an empty string, list, dict or set as value
from the jsondata.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.LoadEntityParam.titles" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">titles</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The pages titles to load - one or multiple titles (wiki page name) of
entities</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.LoadEntityResult" class="doc doc-heading">
            <code>LoadEntityResult</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.v1.BaseModel">BaseModel</span></code></p>


        <p>Result of load_entity()</p>







              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">LoadEntityResult</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Result of load_entity()&quot;&quot;&quot;</span>

    <span class="n">entities</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The dataclass instance(s)&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.LoadEntityResult.entities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">entities</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The dataclass instance(s)</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.OverwriteClassParam" class="doc doc-heading">
            <code>OverwriteClassParam</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="osw.model.static.OswBaseModel">OswBaseModel</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">OverwriteClassParam</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
    <span class="n">model</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]</span>  <span class="c1"># ModelMetaclass</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The model class for which this is the overwrite params object.&quot;&quot;&quot;</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OVERWRITE_CLASS_OPTIONS</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Defines the overall overwriting behavior. Used for any property if the</span>
<span class="sd">    property specific setting is not set.&quot;&quot;&quot;</span>
    <span class="n">per_property</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OverwriteOptions</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A key (property name) - value (overwrite setting) pair.&quot;&quot;&quot;</span>
    <span class="n">_per_property</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OVERWRITE_CLASS_OPTIONS</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Private property, for internal use only. Use &#39;per_property&#39; instead&quot;&quot;&quot;</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;per_property&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_per_property</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">per_property</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">model_</span> <span class="o">=</span> <span class="n">values</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">)</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">model_</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">per_property</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="n">field_names</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">):</span>
            <span class="n">missing_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">]</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Property not found in model: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">missing_keys</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">per_property</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called when setting an attribute&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;per_property&quot;</span><span class="p">:</span>
            <span class="c1"># compare value and self.per_property</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">field_name</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="p">}</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">field_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="p">}</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;model&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="n">field_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called after validation. Sets the fallback for every property that</span>
<span class="sd">        has not been specified in per_property.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
        <span class="n">per_property_</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">per_property_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">field_name</span><span class="p">:</span> <span class="n">per_property_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="c1"># todo: from class definition get properties with hidden /</span>
        <span class="c1">#  read_only option  #  those can be safely overwritten - set the to True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_overwrite_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">property_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OverwriteOptions</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the fallback overwrite option for the given field name&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">property_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.OverwriteClassParam.model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">model</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The model class for which this is the overwrite params object.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.OverwriteClassParam.overwrite" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">overwrite</span> <span class="o">=</span> <span class="kc">False</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Defines the overall overwriting behavior. Used for any property if the
property specific setting is not set.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.OverwriteClassParam.per_property" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">per_property</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>A key (property name) - value (overwrite setting) pair.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="osw.core.OSW.OverwriteClassParam.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Called after validation. Sets the fallback for every property that
has not been specified in per_property.</p>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Called after validation. Sets the fallback for every property that</span>
<span class="sd">    has not been specified in per_property.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
    <span class="n">per_property_</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">per_property_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="n">per_property_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="osw.core.OSW.OverwriteClassParam.__setattr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Called when setting an attribute</p>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Called when setting an attribute&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;per_property&quot;</span><span class="p">:</span>
        <span class="c1"># compare value and self.per_property</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">field_name</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="p">}</span>
    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">field_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="p">}</span>
    <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;model&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">field_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_property</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="osw.core.OSW.OverwriteClassParam.get_overwrite_setting" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_overwrite_setting</span><span class="p">(</span><span class="n">property_name</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns the fallback overwrite option for the given field name</p>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_overwrite_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">property_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OverwriteOptions</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the fallback overwrite option for the given field name&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_per_property</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">property_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.SchemaRegistration" class="doc doc-heading">
            <code>SchemaRegistration</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.v1.BaseModel">BaseModel</span></code></p>


        <p>dataclass param of register_schema()</p>







              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SchemaRegistration</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;dataclass param of register_schema()&quot;&quot;&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># allow any class as type</span>

    <span class="n">model_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The model class&quot;&quot;&quot;</span>
    <span class="n">schema_uuid</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># Optional[str] = model_cls.__uuid__</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The schema uuid&quot;&quot;&quot;</span>
    <span class="n">schema_name</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># Optional[str] = model_cls.__name__</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The schema name&quot;&quot;&quot;</span>
    <span class="n">schema_bases</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Category:Item&quot;</span><span class="p">])</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A list of base schemas (referenced by allOf)&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.SchemaRegistration.model_cls" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">model_cls</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The model class</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.SchemaRegistration.schema_bases" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">schema_bases</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Category:Item&#39;</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>A list of base schemas (referenced by allOf)</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.SchemaRegistration.schema_name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">schema_name</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The schema name</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.SchemaRegistration.schema_uuid" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">schema_uuid</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The schema uuid</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.SchemaUnregistration" class="doc doc-heading">
            <code>SchemaUnregistration</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.v1.BaseModel">BaseModel</span></code></p>


        <p>dataclass param of register_schema()</p>







              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SchemaUnregistration</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;dataclass param of register_schema()&quot;&quot;&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># allow any class as type</span>

    <span class="n">model_cls</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The model class&quot;&quot;&quot;</span>
    <span class="n">model_uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The model uuid&quot;&quot;&quot;</span>
    <span class="n">comment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The comment for the deletion, to be left behind&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.SchemaUnregistration.comment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">comment</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The comment for the deletion, to be left behind</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.SchemaUnregistration.model_cls" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">model_cls</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The model class</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.SchemaUnregistration.model_uuid" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">model_uuid</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The model uuid</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.StoreEntityParam" class="doc doc-heading">
            <code>StoreEntityParam</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="osw.model.static.OswBaseModel">OswBaseModel</span></code></p>








              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StoreEntityParam</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
    <span class="n">entities</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>  <span class="c1"># actually model.Entity</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The entities to store. Can be a single entity or a list of entities.&quot;&quot;&quot;</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The namespace of the entities. If not set, the namespace is derived from the</span>
<span class="sd">    entity.&quot;&quot;&quot;</span>
    <span class="n">parallel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If set to True, the entities are stored in parallel.&quot;&quot;&quot;</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OVERWRITE_CLASS_OPTIONS</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;keep existing&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If no class specific overwrite setting is set, this setting is used.&quot;&quot;&quot;</span>
    <span class="n">overwrite_per_class</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A list of OverwriteClassParam objects. If a class specific overwrite setting</span>
<span class="sd">    is set, this setting is used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">remove_empty</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If true, remove key with an empty string value from the jsondata.&quot;&quot;&quot;</span>
    <span class="n">change_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ID to document the change. Entities within the same store_entity() call will</span>
<span class="sd">    share the same change_id. This parameter can also be used to link multiple</span>
<span class="sd">    store_entity() calls.&quot;&quot;&quot;</span>
    <span class="n">bot_edit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Mark the edit as bot edit,</span>
<span class="sd">    which hides the edit from the recent changes in the default filer&quot;&quot;&quot;</span>
    <span class="n">edit_comment</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Additional comment to explain the edit.&quot;&quot;&quot;</span>
    <span class="n">meta_category_title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="s2">&quot;Category:Category&quot;</span>
    <span class="n">debug</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">offline</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;If set to True, the processed entities are not upload but only returned as WtPages.</span>
<span class="sd">    Can be used to create WtPage objects from entities without uploading them.&quot;&quot;&quot;</span>
    <span class="n">_overwrite_per_class</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">PrivateAttr</span><span class="p">()</span>
    <span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Private attribute, for internal use only. Use &#39;overwrite_per_class&#39;</span>
<span class="sd">    instead.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entities</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">change_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Meta</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">change_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">change_id</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">change_id</span><span class="p">:</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">change_id</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="p">(</span>
                <span class="kc">True</span>  <span class="c1"># Set to True after implementation of asynchronous upload</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="s2">&quot;overwrite&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_overwrite_per_class</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;by name&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;by type&quot;</span><span class="p">:</span> <span class="p">{}}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite_per_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite_per_class</span><span class="p">:</span>
                <span class="n">model_name</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="n">model_type</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_default</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">model_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overwrite_per_class</span><span class="p">[</span><span class="s2">&quot;by name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="ow">or</span> <span class="n">model_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overwrite_per_class</span><span class="p">[</span><span class="s2">&quot;by type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;More than one OverwriteClassParam for the class &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">model_type</span><span class="si">}</span><span class="s2">&#39; (</span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">) has been passed in the &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;list to &#39;overwrite_per_class&#39;!&quot;</span>
                    <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_overwrite_per_class</span><span class="p">[</span><span class="s2">&quot;by name&quot;</span><span class="p">][</span><span class="n">model_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">param</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_overwrite_per_class</span><span class="p">[</span><span class="s2">&quot;by type&quot;</span><span class="p">][</span><span class="n">model_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">param</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityParam.bot_edit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bot_edit</span> <span class="o">=</span> <span class="kc">True</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Mark the edit as bot edit,
which hides the edit from the recent changes in the default filer</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityParam.change_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">change_id</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>ID to document the change. Entities within the same store_entity() call will
share the same change_id. This parameter can also be used to link multiple
store_entity() calls.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityParam.edit_comment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">edit_comment</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Additional comment to explain the edit.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityParam.entities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">entities</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The entities to store. Can be a single entity or a list of entities.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityParam.namespace" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">namespace</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The namespace of the entities. If not set, the namespace is derived from the
entity.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityParam.offline" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">offline</span> <span class="o">=</span> <span class="kc">False</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>If set to True, the processed entities are not upload but only returned as WtPages.
Can be used to create WtPage objects from entities without uploading them.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityParam.overwrite" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">overwrite</span> <span class="o">=</span> <span class="s1">&#39;keep existing&#39;</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>If no class specific overwrite setting is set, this setting is used.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityParam.overwrite_per_class" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">overwrite_per_class</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>A list of OverwriteClassParam objects. If a class specific overwrite setting
is set, this setting is used.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityParam.parallel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parallel</span> <span class="o">=</span> <span class="kc">None</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>If set to True, the entities are stored in parallel.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityParam.remove_empty" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">remove_empty</span> <span class="o">=</span> <span class="kc">True</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>If true, remove key with an empty string value from the jsondata.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="osw.core.OSW.StoreEntityResult" class="doc doc-heading">
            <code>StoreEntityResult</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="osw.model.static.OswBaseModel">OswBaseModel</span></code></p>


        <p>Result of store_entity()</p>







              <details class="quote">
                <summary>Source code in <code>src/osw/core.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">StoreEntityResult</span><span class="p">(</span><span class="n">OswBaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Result of store_entity()&quot;&quot;&quot;</span>

    <span class="n">change_id</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The ID of the change&quot;&quot;&quot;</span>
    <span class="n">pages</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">WtPage</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The pages that have been stored&quot;&quot;&quot;</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityResult.change_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">change_id</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The ID of the change</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="osw.core.OSW.StoreEntityResult.pages" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pages</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The pages that have been stored</p>

    </div>

</div>





  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.check_dependencies" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_dependencies</span><span class="p">(</span><span class="n">dependencies</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Check if the dependencies are installed in the osw.model.entity module.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dependencies</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with the keys being the names of the dependencies and the
values being the full page name (IRI) of the dependencies.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_dependencies</span><span class="p">(</span><span class="n">dependencies</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the dependencies are installed in the osw.model.entity module.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dependencies</span>
<span class="sd">        A dictionary with the keys being the names of the dependencies and the</span>
<span class="sd">        values being the full page name (IRI) of the dependencies.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">dep</span> <span class="k">for</span> <span class="n">dep</span> <span class="ow">in</span> <span class="n">dependencies</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">dep</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.close_connection" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">close_connection</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Close the connection to the OSL instance.</p>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">close_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Close the connection to the OSL instance.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mw_site</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.delete_entity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">delete_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Deletes the given entity/entities from the OSW instance.</p>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">delete_entity</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">entity</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">],</span> <span class="n">DeleteEntityParam</span><span class="p">],</span>
    <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deletes the given entity/entities from the OSW instance.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">OSW</span><span class="o">.</span><span class="n">DeleteEntityParam</span><span class="p">):</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">DeleteEntityParam</span><span class="p">(</span><span class="n">entities</span><span class="o">=</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">comment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">entity</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">delete_entity_</span><span class="p">(</span><span class="n">entity_</span><span class="p">,</span> <span class="n">comment_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deletes the given entity from the OSW instance.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        entity_:</span>
<span class="sd">            The dataclass instance to delete</span>
<span class="sd">        comment_:</span>
<span class="sd">            Command for the change log, by default None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">title_</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">namespace_</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity_</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span> <span class="ow">and</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">title</span><span class="p">:</span>
                    <span class="n">title_</span> <span class="o">=</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">title</span>
                <span class="k">if</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">namespace</span><span class="p">:</span>
                    <span class="n">namespace_</span> <span class="o">=</span> <span class="n">entity_</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">namespace</span>
        <span class="k">if</span> <span class="n">namespace_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">namespace_</span> <span class="o">=</span> <span class="n">get_namespace</span><span class="p">(</span><span class="n">entity_</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">title_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">title_</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">get_osw_id</span><span class="p">(</span><span class="n">entity_</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">namespace_</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">title_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Unsupported entity type&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">entity_title</span> <span class="o">=</span> <span class="n">namespace_</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">title_</span>
        <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">entity_title</span><span class="p">]))</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span>
            <span class="mi">0</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
            <span class="n">page</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">comment_</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entity deleted: &quot;</span> <span class="o">+</span> <span class="n">page</span><span class="o">.</span><span class="n">get_url</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity &#39;</span><span class="si">{</span><span class="n">entity_title</span><span class="si">}</span><span class="s2">&#39; does not exist!&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">parallelize</span><span class="p">(</span>
            <span class="n">delete_entity_</span><span class="p">,</span>
            <span class="n">entity</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span>
            <span class="n">flush_at_end</span><span class="o">=</span><span class="n">entity</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
            <span class="n">comment_</span><span class="o">=</span><span class="n">entity</span><span class="o">.</span><span class="n">comment</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_</span> <span class="o">=</span> <span class="p">[</span><span class="n">delete_entity_</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">entity</span><span class="o">.</span><span class="n">comment</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">entities</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.ensure_dependencies" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ensure_dependencies</span><span class="p">(</span><span class="n">dependencies</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Ensure that the dependencies are installed in the osw.model.entity module.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dependencies</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with the keys being the names of the dependencies and the
values being the full page name (IRI) of the dependencies.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ensure_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure that the dependencies are installed in the osw.model.entity module.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dependencies</span>
<span class="sd">        A dictionary with the keys being the names of the dependencies and the</span>
<span class="sd">        values being the full page name (IRI) of the dependencies.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_dependencies</span><span class="p">(</span><span class="n">dependencies</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">install_dependencies</span><span class="p">(</span><span class="n">dependencies</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.export_jsonld" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">export_jsonld</span><span class="p">(</span><span class="n">params</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Exports the given entity/entities as JSON-LD.</p>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1606</span>
<span class="normal">1607</span>
<span class="normal">1608</span>
<span class="normal">1609</span>
<span class="normal">1610</span>
<span class="normal">1611</span>
<span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span>
<span class="normal">1684</span>
<span class="normal">1685</span>
<span class="normal">1686</span>
<span class="normal">1687</span>
<span class="normal">1688</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">export_jsonld</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">ExportJsonLdParams</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExportJsonLdResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exports the given entity/entities as JSON-LD.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">resolve_context</span><span class="p">:</span>
        <span class="n">jsonld</span><span class="o">.</span><span class="n">set_document_loader</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_jsonld_context_loader</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">context_loader_config</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="n">documents</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">graph_document</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;@graph&quot;</span><span class="p">:</span> <span class="p">[]}</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">build_rdf_graph</span><span class="p">:</span>
        <span class="n">graph</span> <span class="o">=</span> <span class="n">rdflib</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
        <span class="n">prefixes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_prefix_dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">prefixes</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">[</span><span class="n">prefix</span><span class="p">])</span>

    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">entities</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="n">exclude_none</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">id_keys</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># append &quot;@id&quot; mappings to the context in an additional object</span>
            <span class="n">id_mapping</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">id_keys</span><span class="p">:</span>
                <span class="n">id_mapping</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;@id&quot;</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">id_mapping</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">type</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;/wiki/&quot;</span> <span class="o">+</span> <span class="n">t</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_jsonld_context_prefixes</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">context</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">additional_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]]</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">additional_context</span><span class="p">)</span>

        <span class="c1"># if none of the id_keys is found, use the full title</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">k</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">id_keys</span><span class="p">):</span>
            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_full_title</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">resolve_context</span><span class="p">:</span>
            <span class="n">graph_document</span><span class="p">[</span><span class="s2">&quot;@graph&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">jsonld</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;expand&quot;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">jsonld</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">params</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;flatten&quot;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">jsonld</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">params</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;compact&quot;</span><span class="p">:</span>
                <span class="c1"># data = jsonld.expand(data)</span>
                <span class="c1"># if isinstance(data, list): data = data[0]</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">jsonld</span><span class="o">.</span><span class="n">compact</span><span class="p">(</span>
                    <span class="n">data</span><span class="p">,</span>
                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">params</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">params</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;frame&quot;</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">jsonld</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span>
                    <span class="n">data</span><span class="p">,</span>
                    <span class="p">(</span>
                        <span class="p">{</span><span class="s2">&quot;@context&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;@context&quot;</span><span class="p">]}</span>
                        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span>
                        <span class="k">else</span> <span class="n">params</span><span class="o">.</span><span class="n">frame</span>
                    <span class="p">),</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">build_rdf_graph</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;json-ld&quot;</span><span class="p">)</span>

        <span class="n">documents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">ExportJsonLdResult</span><span class="p">(</span>
        <span class="n">documents</span><span class="o">=</span><span class="n">documents</span><span class="p">,</span> <span class="n">graph_document</span><span class="o">=</span><span class="n">graph_document</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="n">graph</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.fetch_schema" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fetch_schema</span><span class="p">(</span><span class="n">fetchSchemaParam</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Loads the given schemas from the OSW instance and auto-generates python
datasclasses within osw.model.entity from it</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>fetchSchemaParam</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="FetchSchemaParam (osw.core.OSW.FetchSchemaParam)" href="#osw.core.OSW.FetchSchemaParam">FetchSchemaParam</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>See FetchSchemaParam, by default None</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fetch_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fetchSchemaParam</span><span class="p">:</span> <span class="n">FetchSchemaParam</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads the given schemas from the OSW instance and auto-generates python</span>
<span class="sd">    datasclasses within osw.model.entity from it</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fetchSchemaParam</span>
<span class="sd">        See FetchSchemaParam, by default None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">schema_title</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">schema_title</span> <span class="o">=</span> <span class="p">[</span><span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">schema_title</span><span class="p">]</span>
    <span class="n">first</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">schema_title</span> <span class="ow">in</span> <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">schema_title</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">mode</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">first</span><span class="p">:</span>  <span class="c1"># &#39;replace&#39; makes only sense for the first schema</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;append&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fetch_schema</span><span class="p">(</span>
            <span class="n">OSW</span><span class="o">.</span><span class="n">_FetchSchemaParam</span><span class="p">(</span>
                <span class="n">schema_title</span><span class="o">=</span><span class="n">schema_title</span><span class="p">,</span>
                <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
                <span class="n">legacy_generator</span><span class="o">=</span><span class="n">fetchSchemaParam</span><span class="o">.</span><span class="n">legacy_generator</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.get_osw_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_osw_id</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Generates a OSW-ID based on the given uuid by prefixing "OSW" and removing
all '-' from the uuid-string</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>uuid</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="uuid.UUID">UUID</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>uuid object, e.g. UUID("2ea5b605-c91f-4e5a-9559-3dff79fdd4a5")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>    OSW-ID string, e.g. OSW2ea5b605c91f4e5a95593dff79fdd4a5</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_osw_id</span><span class="p">(</span><span class="n">uuid</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">UUID</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a OSW-ID based on the given uuid by prefixing &quot;OSW&quot; and removing</span>
<span class="sd">    all &#39;-&#39; from the uuid-string</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    uuid</span>
<span class="sd">        uuid object, e.g. UUID(&quot;2ea5b605-c91f-4e5a-9559-3dff79fdd4a5&quot;)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        OSW-ID string, e.g. OSW2ea5b605c91f4e5a95593dff79fdd4a5</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;OSW&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.get_uuid" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_uuid</span><span class="p">(</span><span class="n">osw_id</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Returns the uuid for a given OSW-ID</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>osw_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>OSW-ID string, e.g. OSW2ea5b605c91f4e5a95593dff79fdd4a5</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>    uuid object, e.g. UUID(&#34;2ea5b605-c91f-4e5a-9559-3dff79fdd4a5&#34;)</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_uuid</span><span class="p">(</span><span class="n">osw_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UUID</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the uuid for a given OSW-ID</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    osw_id</span>
<span class="sd">        OSW-ID string, e.g. OSW2ea5b605c91f4e5a95593dff79fdd4a5</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        uuid object, e.g. UUID(&quot;2ea5b605-c91f-4e5a-9559-3dff79fdd4a5&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">UUID</span><span class="p">(</span><span class="n">osw_id</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;OSW&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.install_dependencies" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">install_dependencies</span><span class="p">(</span><span class="n">dependencies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">,</span> <span class="n">policy</span><span class="o">=</span><span class="s1">&#39;force&#39;</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Installs data models, listed in the dependencies, in the osw.model.entity
module.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dependencies</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with the keys being the names of the dependencies and the
values being the full page name (IRI) of the dependencies.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mode</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The mode to use when loading the dependencies. Default is 'append',
which will keep existing data models and only load the missing ones. The
mode 'replace' will replace all existing data models with the new ones.</p>
              </div>
            </td>
            <td>
                  <code>&#39;append&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>policy</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The policy to use when loading the dependencies. Default is 'force',
which will always load the dependencies. If policy is 'if-missing',
dependencies will only be loaded if they are not already installed.
This may lead to outdated dependencies, if the dependencies have been
updated on the server. If policy is 'if-outdated', dependencies will only
be loaded if they were updated on the server. (not implemented yet)</p>
              </div>
            </td>
            <td>
                  <code>&#39;force&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">install_dependencies</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dependencies</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;append&quot;</span><span class="p">,</span>
    <span class="n">policy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;force&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Installs data models, listed in the dependencies, in the osw.model.entity</span>
<span class="sd">    module.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dependencies</span>
<span class="sd">        A dictionary with the keys being the names of the dependencies and the</span>
<span class="sd">        values being the full page name (IRI) of the dependencies.</span>
<span class="sd">    mode</span>
<span class="sd">        The mode to use when loading the dependencies. Default is &#39;append&#39;,</span>
<span class="sd">        which will keep existing data models and only load the missing ones. The</span>
<span class="sd">        mode &#39;replace&#39; will replace all existing data models with the new ones.</span>
<span class="sd">    policy</span>
<span class="sd">        The policy to use when loading the dependencies. Default is &#39;force&#39;,</span>
<span class="sd">        which will always load the dependencies. If policy is &#39;if-missing&#39;,</span>
<span class="sd">        dependencies will only be loaded if they are not already installed.</span>
<span class="sd">        This may lead to outdated dependencies, if the dependencies have been</span>
<span class="sd">        updated on the server. If policy is &#39;if-outdated&#39;, dependencies will only</span>
<span class="sd">        be loaded if they were updated on the server. (not implemented yet)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">dependencies</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">default_params</span><span class="o">.</span><span class="n">dependencies</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;No &#39;dependencies&#39; parameter was passed to &quot;</span>
                <span class="s2">&quot;install_dependencies() and &quot;</span>
                <span class="s2">&quot;osw.defaults.params.dependencies was not set!&quot;</span>
            <span class="p">)</span>
        <span class="n">dependencies</span> <span class="o">=</span> <span class="n">default_params</span><span class="o">.</span><span class="n">dependencies</span>
    <span class="n">schema_fpts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">dependencies</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">policy</span> <span class="o">!=</span> <span class="s2">&quot;if-missing&quot;</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
            <span class="n">schema_fpts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">policy</span> <span class="o">==</span> <span class="s2">&quot;if-outdated&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                <span class="s2">&quot;The policy &#39;if-outdated&#39; is not implemented yet.&quot;</span>
            <span class="p">)</span>
    <span class="n">schema_fpts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">schema_fpts</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">schema_fpt</span> <span class="ow">in</span> <span class="n">schema_fpts</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">schema_fpt</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Full page title &#39;</span><span class="si">{</span><span class="n">schema_fpt</span><span class="si">}</span><span class="s2">&#39; does not have the correct format. &quot;</span>
                <span class="s2">&quot;It should be &#39;Namespace:Name&#39;.&quot;</span>
            <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_schema</span><span class="p">(</span><span class="n">OSW</span><span class="o">.</span><span class="n">FetchSchemaParam</span><span class="p">(</span><span class="n">schema_title</span><span class="o">=</span><span class="n">schema_fpts</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.load_entity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_entity</span><span class="p">(</span><span class="n">entity_title</span><span class="p">)</span></code>

</h2>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_entity</span><span class="p">(</span><span class="n">entity_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">model</span><span class="o">.</span><span class="n">Entity</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_entity</span><span class="p">(</span><span class="n">entity_title</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">]</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_entity</span><span class="p">(</span><span class="n">entity_title</span><span class="p">:</span> <span class="n">LoadEntityParam</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LoadEntityResult</span>
</code></pre></div>          </div>


    <div class="doc doc-contents ">

        <p>Loads the entity with the given wiki page name from the OSW instance.
Creates an instance of the class specified by the "type" attribute, default
model.Entity. An instance of model.Entity can be cast to any subclass with
.cast(model.<class>) .</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>entity_title</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="str">str</span>], <a class="autorefs autorefs-internal" title="LoadEntityParam (osw.core.OSW.LoadEntityParam)" href="#osw.core.OSW.LoadEntityParam">LoadEntityParam</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the wiki page name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>    the dataclass instance if only a single title is given</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of dataclass instances if a list of titles is given
a LoadEntityResult instance if a LoadEntityParam is given</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_entity</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">entity_title</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">LoadEntityParam</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">],</span> <span class="n">LoadEntityResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads the entity with the given wiki page name from the OSW instance.</span>
<span class="sd">    Creates an instance of the class specified by the &quot;type&quot; attribute, default</span>
<span class="sd">    model.Entity. An instance of model.Entity can be cast to any subclass with</span>
<span class="sd">    .cast(model.&lt;class&gt;) .</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    entity_title</span>
<span class="sd">        the wiki page name</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        the dataclass instance if only a single title is given</span>
<span class="sd">        a list of dataclass instances if a list of titles is given</span>
<span class="sd">        a LoadEntityResult instance if a LoadEntityParam is given</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity_title</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">param</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">LoadEntityParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">entity_title</span><span class="p">])</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity_title</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">param</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">LoadEntityParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="n">entity_title</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">param</span> <span class="o">=</span> <span class="n">entity_title</span>

    <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">model_to_use</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using schema </span><span class="si">{</span><span class="n">param</span><span class="o">.</span><span class="n">model_to_use</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> to create entity&quot;</span><span class="p">)</span>

    <span class="c1"># store original cache state</span>
    <span class="n">cache_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_cache_enabled</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">disable_cache</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">disable_cache</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cache_state</span> <span class="ow">and</span> <span class="n">param</span><span class="o">.</span><span class="n">disable_cache</span><span class="p">:</span>
        <span class="c1"># enable cache to speed up loading</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">enable_cache</span><span class="p">()</span>

    <span class="n">entities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">pages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">titles</span><span class="p">))</span><span class="o">.</span><span class="n">pages</span>
    <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">pages</span><span class="p">:</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">schemas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">schemas_fetched</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">jsondata</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsondata&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">remove_empty</span><span class="p">:</span>
            <span class="n">remove_empty</span><span class="p">(</span><span class="n">jsondata</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">jsondata</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">jsondata</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">category</span><span class="p">]))</span>
                    <span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">schemas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span>
                <span class="c1"># generate model if not already exists</span>
                <span class="n">cls_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">schema</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span>
                <span class="c1"># If a schema_to_use is provided, we do not need to check if the</span>
                <span class="c1">#  model exists</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">param</span><span class="o">.</span><span class="n">model_to_use</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">cls_name</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">autofetch_schema</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">fetch_schema</span><span class="p">(</span>
                                <span class="n">OSW</span><span class="o">.</span><span class="n">FetchSchemaParam</span><span class="p">(</span>
                                    <span class="n">schema_title</span><span class="o">=</span><span class="n">category</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;append&quot;</span>
                                <span class="p">)</span>
                            <span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">cls_name</span><span class="p">):</span>
                        <span class="n">schemas_fetched</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="nb">print</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Error: Model </span><span class="si">{</span><span class="n">cls_name</span><span class="si">}</span><span class="s2"> not found. Schema </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2"> &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;needs to be fetched first.&quot;</span>
                        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">schemas_fetched</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">model_to_use</span><span class="p">:</span>
            <span class="n">entity</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">OswBaseModel</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">model_to_use</span><span class="p">(</span><span class="o">**</span><span class="n">jsondata</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">schemas</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: no schema defined&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">schemas</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">schemas</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;title&quot;</span><span class="p">])</span>
            <span class="n">entity</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">Entity</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">jsondata</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">bases</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">schemas</span><span class="p">:</span>
                <span class="n">bases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">schema</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]))</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="n">__base__</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">bases</span><span class="p">))</span>
            <span class="n">entity</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">Entity</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">jsondata</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">entity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># make sure we do not override existing metadata</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s2">&quot;meta&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">entity</span><span class="o">.</span><span class="n">meta</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Meta</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="p">,</span> <span class="s2">&quot;wiki_page&quot;</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">WikiPage</span><span class="p">()</span>
            <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">namespace</span> <span class="o">=</span> <span class="n">namespace_from_full_title</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
            <span class="n">entity</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">wiki_page</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title_from_full_title</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>

        <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="c1"># restore original cache state</span>
    <span class="k">if</span> <span class="n">cache_state</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">enable_cache</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">disable_cache</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity_title</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>  <span class="c1"># single title</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">entities</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity_title</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>  <span class="c1"># list of titles</span>
        <span class="k">return</span> <span class="n">entities</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity_title</span><span class="p">,</span> <span class="n">OSW</span><span class="o">.</span><span class="n">LoadEntityParam</span><span class="p">):</span>  <span class="c1"># LoadEntityParam</span>
        <span class="k">return</span> <span class="n">OSW</span><span class="o">.</span><span class="n">LoadEntityResult</span><span class="p">(</span><span class="n">entities</span><span class="o">=</span><span class="n">entities</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.register_schema" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register_schema</span><span class="p">(</span><span class="n">schema_registration</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Registers a new or updated schema in OSW by creating the corresponding
category page.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schema_registration</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="SchemaRegistration (osw.core.OSW.SchemaRegistration)" href="#osw.core.OSW.SchemaRegistration">SchemaRegistration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>see SchemaRegistration</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">register_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema_registration</span><span class="p">:</span> <span class="n">SchemaRegistration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Registers a new or updated schema in OSW by creating the corresponding</span>
<span class="sd">    category page.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    schema_registration</span>
<span class="sd">        see SchemaRegistration</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="n">schema_registration</span><span class="o">.</span><span class="n">model_cls</span>

    <span class="n">jsondata</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">jsondata</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">schema_registration</span><span class="o">.</span><span class="n">schema_uuid</span>
    <span class="n">jsondata</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">schema_registration</span><span class="o">.</span><span class="n">schema_name</span><span class="p">,</span> <span class="s2">&quot;lang&quot;</span><span class="p">:</span> <span class="s2">&quot;en&quot;</span><span class="p">}</span>
    <span class="n">jsondata</span><span class="p">[</span><span class="s2">&quot;subclass_of&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">schema_registration</span><span class="o">.</span><span class="n">schema_bases</span>

    <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">entity_title</span> <span class="o">=</span> <span class="s2">&quot;Category:&quot;</span> <span class="o">+</span> <span class="n">OSW</span><span class="o">.</span><span class="n">get_osw_id</span><span class="p">(</span><span class="n">schema_registration</span><span class="o">.</span><span class="n">schema_uuid</span><span class="p">)</span>

        <span class="n">page</span> <span class="o">=</span> <span class="n">WtPage</span><span class="p">(</span><span class="n">wtSite</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">entity_title</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
            <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span>
                <span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">entity_title</span><span class="p">])</span>
            <span class="p">)</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">page</span><span class="o">.</span><span class="n">set_slot_content</span><span class="p">(</span><span class="s2">&quot;jsondata&quot;</span><span class="p">,</span> <span class="n">jsondata</span><span class="p">)</span>

        <span class="n">schema</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
            <span class="n">entity</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;$ref&quot;</span><span class="p">,</span> <span class="s2">&quot;dollarref&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">jsonpath_expr</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s2">&quot;$..allOf&quot;</span><span class="p">)</span>
        <span class="c1"># Replace local definitions (#/definitions/...) with embedded definitions</span>
        <span class="c1">#  to prevent resolve errors in json-editor</span>
        <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">jsonpath_expr</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">schema</span><span class="p">):</span>
            <span class="n">result_array</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">subschema</span> <span class="ow">in</span> <span class="n">match</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="c1"># pprint(subschema)</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">subschema</span><span class="p">[</span><span class="s2">&quot;dollarref&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">):</span>
                    <span class="n">definition_jsonpath_expr</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span>
                        <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">def_match</span> <span class="ow">in</span> <span class="n">definition_jsonpath_expr</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">schema</span><span class="p">):</span>
                        <span class="c1"># pprint(def_match.value)</span>
                        <span class="n">result_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">def_match</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subschema</span><span class="p">)</span>
            <span class="k">match</span><span class="o">.</span><span class="n">full_path</span><span class="o">.</span><span class="n">update_or_create</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">result_array</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;definitions&quot;</span> <span class="ow">in</span> <span class="n">schema</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">schema</span><span class="p">[</span><span class="s2">&quot;definitions&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;allOf&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">schema</span><span class="p">:</span>
            <span class="n">schema</span><span class="p">[</span><span class="s2">&quot;allOf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="n">schema_registration</span><span class="o">.</span><span class="n">schema_bases</span><span class="p">:</span>
            <span class="n">schema</span><span class="p">[</span><span class="s2">&quot;allOf&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span><span class="s2">&quot;$ref&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;/wiki/</span><span class="si">{</span><span class="n">base</span><span class="si">}</span><span class="s2">?action=raw&amp;slot=jsonschema&quot;</span><span class="p">}</span>
            <span class="p">)</span>

        <span class="n">page</span><span class="o">.</span><span class="n">set_slot_content</span><span class="p">(</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Unsupported entity type&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">page</span><span class="o">.</span><span class="n">edit</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Entity stored at &quot;</span> <span class="o">+</span> <span class="n">page</span><span class="o">.</span><span class="n">get_url</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.sort_list_of_entities_by_class" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sort_list_of_entities_by_class</span><span class="p">(</span><span class="n">entities</span><span class="p">,</span> <span class="n">exclude_typeless</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">raise_error</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Sorts a list of entities by class name and type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>entities</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="osw.model.static.OswBaseModel">OswBaseModel</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of entities to be sorted</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>exclude_typeless</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exclude entities, which are instances of a class that does not
define a field 'type'</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>raise_error</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raise an error if an entity can not be processed because it is an
instance of class that does not define a field 'type'</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sort_list_of_entities_by_class</span><span class="p">(</span>
    <span class="n">entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">],</span>
    <span class="n">exclude_typeless</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">raise_error</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SortEntitiesResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sorts a list of entities by class name and type.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    entities:</span>
<span class="sd">        List of entities to be sorted</span>
<span class="sd">    exclude_typeless:</span>
<span class="sd">        Exclude entities, which are instances of a class that does not</span>
<span class="sd">        define a field &#39;type&#39;</span>
<span class="sd">    raise_error:</span>
<span class="sd">        Raise an error if an entity can not be processed because it is an</span>
<span class="sd">        instance of class that does not define a field &#39;type&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">by_name</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">by_type</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
        <span class="c1"># Get class name</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="c1"># See if the class has a type field</span>
        <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">__fields__</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Instance &#39;</span><span class="si">{</span><span class="n">entity</span><span class="si">}</span><span class="s2">&#39; of class &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; can not be processed &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;as the class does not define a field &#39;type&#39;.&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">exclude_typeless</span><span class="p">:</span>
                <span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Skipping instance &#39;</span><span class="si">{</span><span class="n">entity</span><span class="si">}</span><span class="s2">&#39; of class &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; as the class &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;does not define a field &#39;type&#39;.&quot;</span>
                <span class="p">)</span>
                <span class="c1"># Excludes the respective entity from the list which will be</span>
                <span class="c1">#  processed further:</span>
                <span class="k">continue</span>
            <span class="n">model_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Get class type if available</span>
            <span class="n">model_type</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">__fields__</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_default</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># Add entity to by_name</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">by_name</span><span class="p">:</span>
            <span class="n">by_name</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">by_name</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="c1"># Add entity to by_type</span>
        <span class="k">if</span> <span class="n">model_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">by_type</span><span class="p">:</span>
            <span class="n">by_type</span><span class="p">[</span><span class="n">model_type</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">by_type</span><span class="p">[</span><span class="n">model_type</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">OSW</span><span class="o">.</span><span class="n">SortEntitiesResult</span><span class="p">(</span><span class="n">by_name</span><span class="o">=</span><span class="n">by_name</span><span class="p">,</span> <span class="n">by_type</span><span class="o">=</span><span class="n">by_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.store_entity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">store_entity</span><span class="p">(</span><span class="n">param</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>stores the given dataclass instance as OSW page by calling BaseModel.json()</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>param</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="StoreEntityParam (osw.core.OSW.StoreEntityParam)" href="#osw.core.OSW.StoreEntityParam">StoreEntityParam</a>, <span title="osw.model.static.OswBaseModel">OswBaseModel</span>, <span title="typing.List">List</span>[<span title="osw.model.static.OswBaseModel">OswBaseModel</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>StoreEntityParam, the dataclass instance or a list of instances</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">store_entity</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">StoreEntityParam</span><span class="p">,</span> <span class="n">OswBaseModel</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">OswBaseModel</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StoreEntityResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;stores the given dataclass instance as OSW page by calling BaseModel.json()</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param:</span>
<span class="sd">        StoreEntityParam, the dataclass instance or a list of instances</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">):</span>
        <span class="n">param</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">StoreEntityParam</span><span class="p">(</span><span class="n">entities</span><span class="o">=</span><span class="p">[</span><span class="n">param</span><span class="p">])</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">param</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">StoreEntityParam</span><span class="p">(</span><span class="n">entities</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">param</span><span class="o">.</span><span class="n">entities</span> <span class="o">=</span> <span class="p">[</span><span class="n">param</span><span class="o">.</span><span class="n">entities</span><span class="p">]</span>

    <span class="n">param</span><span class="p">:</span> <span class="n">OSW</span><span class="o">.</span><span class="n">StoreEntityParam</span> <span class="o">=</span> <span class="n">param</span>

    <span class="n">max_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span>
    <span class="n">created_pages</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">meta_category_templates</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">namespace</span> <span class="o">==</span> <span class="s2">&quot;Category&quot;</span><span class="p">:</span>
        <span class="n">meta_category_titles</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">meta_category_title</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">meta_category_titles</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">meta_category_titles</span> <span class="o">=</span> <span class="p">[</span><span class="n">meta_category_titles</span><span class="p">]</span>
        <span class="n">meta_category_template_strs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># We have to do this iteratively to support meta categories inheritance</span>
        <span class="k">while</span> <span class="n">meta_category_titles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">meta_category_titles</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">meta_categories</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span>
                <span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="n">meta_category_titles</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">pages</span>
            <span class="k">for</span> <span class="n">meta_category</span> <span class="ow">in</span> <span class="n">meta_categories</span><span class="p">:</span>
                <span class="n">meta_category_template_strs</span><span class="p">[</span><span class="n">meta_category</span><span class="o">.</span><span class="n">title</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">meta_category</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;schema_template&quot;</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="n">meta_category_titles</span> <span class="o">=</span> <span class="n">meta_category</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsondata&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="s2">&quot;subclass_of&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">meta_category_template_strs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">meta_category_template_str</span> <span class="o">=</span> <span class="n">meta_category_template_strs</span><span class="p">[</span><span class="n">title</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">meta_category_template_str</span><span class="p">:</span>
                <span class="n">meta_category_templates</span><span class="p">[</span><span class="n">title</span><span class="p">]</span> <span class="o">=</span> <span class="n">compile_handlebars_template</span><span class="p">(</span>
                    <span class="n">meta_category_template_str</span>
                <span class="p">)</span>
        <span class="c1"># inverse order to have the most generic template first</span>
        <span class="n">meta_category_templates</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">meta_category_templates</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">store_entity_</span><span class="p">(</span>
        <span class="n">entity_</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">Entity</span><span class="p">,</span>
        <span class="n">namespace_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">overwrite_class_param</span><span class="p">:</span> <span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">title_</span> <span class="o">=</span> <span class="n">get_title</span><span class="p">(</span><span class="n">entity_</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">namespace_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">namespace_</span> <span class="o">=</span> <span class="n">get_namespace</span><span class="p">(</span><span class="n">entity_</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">namespace_</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">title_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Unsupported entity type&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">overwrite_class_param</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;overwrite_class_param&#39; must not be None!&quot;</span><span class="p">)</span>
        <span class="n">entity_title</span> <span class="o">=</span> <span class="n">namespace_</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">title_</span>
        <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_overwrite_policy</span><span class="p">(</span>
            <span class="n">OSW</span><span class="o">.</span><span class="n">_ApplyOverwriteParam</span><span class="p">(</span>
                <span class="n">page</span><span class="o">=</span><span class="n">WtPage</span><span class="p">(</span>
                    <span class="n">wtSite</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">entity_title</span><span class="p">,</span> <span class="n">do_init</span><span class="o">=</span><span class="ow">not</span> <span class="n">param</span><span class="o">.</span><span class="n">offline</span>
                <span class="p">),</span>
                <span class="n">entity</span><span class="o">=</span><span class="n">entity_</span><span class="p">,</span>
                <span class="n">namespace</span><span class="o">=</span><span class="n">namespace_</span><span class="p">,</span>
                <span class="n">policy</span><span class="o">=</span><span class="n">overwrite_class_param</span><span class="p">,</span>
                <span class="n">remove_empty</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">remove_empty</span><span class="p">,</span>
                <span class="n">debug</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
                <span class="n">offline</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">offline</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">meta_category_templates</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">generated_schemas</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">jsondata</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsondata&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">remove_empty</span><span class="p">:</span>
                    <span class="n">remove_empty</span><span class="p">(</span><span class="n">jsondata</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">meta_category_templates</span><span class="p">:</span>
                    <span class="n">meta_category_template</span> <span class="o">=</span> <span class="n">meta_category_templates</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="n">schema_str</span> <span class="o">=</span> <span class="n">eval_compiled_handlebars_template</span><span class="p">(</span>
                        <span class="n">meta_category_template</span><span class="p">,</span>
                        <span class="n">escape_json_strings</span><span class="p">(</span><span class="n">jsondata</span><span class="p">),</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;_page_title&quot;</span><span class="p">:</span> <span class="n">entity_title</span><span class="p">,</span>  <span class="c1"># Legacy</span>
                            <span class="s2">&quot;_current_subject_&quot;</span><span class="p">:</span> <span class="n">entity_title</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">)</span>
                    <span class="n">generated_schemas</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">schema_str</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema generation from template failed for </span><span class="si">{</span><span class="n">entity_</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">mode</span> <span class="o">=</span> <span class="n">AggregateGeneratedSchemasParamMode</span><span class="o">.</span><span class="n">ROOT_LEVEL</span>
            <span class="c1"># Put generated schema in definitions section,</span>
            <span class="c1">#  currently only enabled for Characteristics</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;CharacteristicType&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
                <span class="n">entity_</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">CharacteristicType</span>
            <span class="p">):</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="n">AggregateGeneratedSchemasParamMode</span><span class="o">.</span><span class="n">DEFINITIONS_SECTION</span>

            <span class="n">new_schema</span> <span class="o">=</span> <span class="n">aggregate_generated_schemas</span><span class="p">(</span>
                <span class="n">AggregateGeneratedSchemasParam</span><span class="p">(</span>
                    <span class="n">schema</span><span class="o">=</span><span class="n">page</span><span class="o">.</span><span class="n">get_slot_content</span><span class="p">(</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">),</span>
                    <span class="n">generated_schemas</span><span class="o">=</span><span class="n">generated_schemas</span><span class="p">,</span>
                    <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">aggregated_schema</span>
            <span class="n">page</span><span class="o">.</span><span class="n">set_slot_content</span><span class="p">(</span><span class="s2">&quot;jsonschema&quot;</span><span class="p">,</span> <span class="n">new_schema</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">offline</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">page</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span>
                <span class="n">param</span><span class="o">.</span><span class="n">edit_comment</span><span class="p">,</span> <span class="n">bot_edit</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">bot_edit</span>
            <span class="p">)</span>  <span class="c1"># will set page.changed if the content of the page has changed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">param</span><span class="o">.</span><span class="n">offline</span> <span class="ow">and</span> <span class="n">page</span><span class="o">.</span><span class="n">changed</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity stored at &#39;</span><span class="si">{</span><span class="n">page</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_index</span><span class="si">}</span><span class="s2">) Entity stored at &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">page</span><span class="o">.</span><span class="n">get_url</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                <span class="p">)</span>
        <span class="n">created_pages</span><span class="p">[</span><span class="n">page</span><span class="o">.</span><span class="n">title</span><span class="p">]</span> <span class="o">=</span> <span class="n">page</span>

    <span class="n">sorted_entities</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">sort_list_of_entities_by_class</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="s2">&quot;Entities to be uploaded have been sorted according to their type.</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="s2">&quot;If you would like to overwrite existing entities or properties, &quot;</span>
        <span class="s2">&quot;pass a StoreEntityParam to store_entity() with &quot;</span>
        <span class="s2">&quot;attribute &#39;overwrite&#39; or &#39;overwrite_per_class&#39; set to, e.g., &quot;</span>
        <span class="s2">&quot;True.&quot;</span>
    <span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">UploadObject</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">entity</span><span class="p">:</span> <span class="n">OswBaseModel</span>
        <span class="c1"># Actually model.Entity but this causes the &quot;type&quot; error</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="n">index</span><span class="p">:</span> <span class="nb">int</span>
        <span class="n">overwrite_class_param</span><span class="p">:</span> <span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span>

    <span class="n">upload_object_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">UploadObject</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">upload_index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">class_type</span><span class="p">,</span> <span class="n">entities</span> <span class="ow">in</span> <span class="n">sorted_entities</span><span class="o">.</span><span class="n">by_type</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># Try to get a class specific overwrite setting</span>
        <span class="n">class_param</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">_overwrite_per_class</span><span class="p">[</span><span class="s2">&quot;by type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">class_type</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">class_param</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">entity_model</span> <span class="o">=</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__class__</span>
            <span class="n">class_param</span> <span class="o">=</span> <span class="n">OSW</span><span class="o">.</span><span class="n">OverwriteClassParam</span><span class="p">(</span>
                <span class="n">model</span><span class="o">=</span><span class="n">entity_model</span><span class="p">,</span>
                <span class="n">overwrite</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">overwrite</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Now adding entities of class type &#39;</span><span class="si">{</span><span class="n">class_type</span><span class="si">}</span><span class="s2">&#39; &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">entity_model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">) to upload list. No class specific&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot; overwrite setting found. Using fallback option &#39;&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">param</span><span class="o">.</span><span class="n">overwrite</span><span class="si">}</span><span class="s2">&#39; for all entities of this class.&quot;</span>
                <span class="p">)</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
            <span class="n">upload_object_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">UploadObject</span><span class="p">(</span>
                    <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
                    <span class="n">namespace</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">namespace</span><span class="p">,</span>
                    <span class="n">index</span><span class="o">=</span><span class="n">upload_index</span><span class="p">,</span>
                    <span class="n">overwrite_class_param</span><span class="o">=</span><span class="n">class_param</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">upload_index</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">handle_upload_object_</span><span class="p">(</span><span class="n">upload_object</span><span class="p">:</span> <span class="n">UploadObject</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">store_entity_</span><span class="p">(</span>
            <span class="n">upload_object</span><span class="o">.</span><span class="n">entity</span><span class="p">,</span>
            <span class="n">upload_object</span><span class="o">.</span><span class="n">namespace</span><span class="p">,</span>
            <span class="n">upload_object</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
            <span class="n">upload_object</span><span class="o">.</span><span class="n">overwrite_class_param</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">param</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">parallelize</span><span class="p">(</span>
            <span class="n">handle_upload_object_</span><span class="p">,</span> <span class="n">upload_object_list</span><span class="p">,</span> <span class="n">flush_at_end</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">debug</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">handle_upload_object_</span><span class="p">(</span><span class="n">upload_object</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">upload_object</span> <span class="ow">in</span> <span class="n">upload_object_list</span>
        <span class="p">]</span>
    <span class="k">return</span> <span class="n">OSW</span><span class="o">.</span><span class="n">StoreEntityResult</span><span class="p">(</span><span class="n">change_id</span><span class="o">=</span><span class="n">param</span><span class="o">.</span><span class="n">change_id</span><span class="p">,</span> <span class="n">pages</span><span class="o">=</span><span class="n">created_pages</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="osw.core.OSW.unregister_schema" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">unregister_schema</span><span class="p">(</span><span class="n">schema_unregistration</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>deletes the corresponding category page</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schema_unregistration</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="SchemaUnregistration (osw.core.OSW.SchemaUnregistration)" href="#osw.core.OSW.SchemaUnregistration">SchemaUnregistration</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>see SchemaUnregistration</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/osw/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unregister_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema_unregistration</span><span class="p">:</span> <span class="n">SchemaUnregistration</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;deletes the corresponding category page</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    schema_unregistration</span>
<span class="sd">        see SchemaUnregistration</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">uuid</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">schema_unregistration</span><span class="o">.</span><span class="n">model_uuid</span><span class="p">:</span>
        <span class="n">uuid</span> <span class="o">=</span> <span class="n">schema_unregistration</span><span class="o">.</span><span class="n">model_uuid</span>
    <span class="k">elif</span> <span class="p">(</span>
        <span class="ow">not</span> <span class="n">uuid</span>
        <span class="ow">and</span> <span class="n">schema_unregistration</span><span class="o">.</span><span class="n">model_cls</span>
        <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">schema_unregistration</span><span class="o">.</span><span class="n">model_cls</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">uuid</span> <span class="o">=</span> <span class="n">schema_unregistration</span><span class="o">.</span><span class="n">model_cls</span><span class="o">.</span><span class="n">__uuid__</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Neither model nor model id provided&quot;</span><span class="p">)</span>

    <span class="n">entity_title</span> <span class="o">=</span> <span class="s2">&quot;Category:&quot;</span> <span class="o">+</span> <span class="n">OSW</span><span class="o">.</span><span class="n">get_osw_id</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span>
    <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">WtSite</span><span class="o">.</span><span class="n">GetPageParam</span><span class="p">(</span><span class="n">titles</span><span class="o">=</span><span class="p">[</span><span class="n">entity_title</span><span class="p">]))</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">page</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">schema_unregistration</span><span class="o">.</span><span class="n">comment</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>